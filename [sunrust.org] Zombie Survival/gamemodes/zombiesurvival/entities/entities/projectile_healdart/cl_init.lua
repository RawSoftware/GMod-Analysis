include("shared.lua")  ENT.NextEmit = 0  function ENT:Initialize()  local cmodel = ClientsideModel("models/healthvial.mdl")  if cmodel:IsValid() then  cmodel:SetPos(self:LocalToWorld(Vector(-4, 0, 0)))  cmodel:SetAngles(self:LocalToWorldAngles(Angle(90, 0, 0)))  cmodel:SetSolid(SOLID_NONE)  cmodel:SetMoveType(MOVETYPE_NONE)  cmodel:SetParent(self)  cmodel:SetOwner(self)  cmodel:SetModelScale(0.4, 0)  cmodel:Spawn()   self.CModel = cmodel  end end  function ENT:OnRemove()  if self.CModel and self.CModel:IsValid() then  self.CModel:Remove()  end end  local matOverride = Material("models/shiny") function ENT:Draw()  local alt = self:GetDTInt(0) == 1   render.SetColorModulation(alt and 1 or 0, alt and 0 or 1, alt and 0.3 or 0)  render.ModelMaterialOverride(matOverride)   self:DrawModel()   render.ModelMaterialOverride()  render.SetColorModulation(1, 1, 1)   if self:GetMoveType() == MOVETYPE_NONE or CurTime() < self.NextEmit then return end  self.NextEmit = CurTime() + 0.01   local pos = self:GetPos()   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)   local particle = emitter:Add("particles/smokey", pos)  particle:SetDieTime(0.35)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(1)  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 255))  particle:SetRollDelta(math.Rand(-10, 10))  particle:SetColor(alt and 255 or 30, alt and 60 or 255, alt and 100 or 30)   emitter:Finish() emitter = nil collectgarbage("step", 64) end 