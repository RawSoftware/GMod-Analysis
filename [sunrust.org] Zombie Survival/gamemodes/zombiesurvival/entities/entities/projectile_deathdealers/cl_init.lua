include("shared.lua")  local matGlow = Material("sprites/light_glow02_add")  ENT.SmokeTimer = 0  function ENT:Draw()  local pos = self:GetPos()   render.SetMaterial(matGlow)  render.DrawSprite(pos, 50, 50, Color(255, 130, 255)) end  function ENT:Initialize()  self.AmbientSound = CreateSound(self, "Missile.Ignite")  self.AmbientSound:PlayEx(1, 75) end  function ENT:Think()  local pos = self:GetPos()  local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)   if self.SmokeTimer < CurTime() then  self.SmokeTimer = CurTime() + 0.2   local particle = emitter:Add("effects/fire_cloud1", pos)  particle:SetVelocity(self:GetVelocity() * -0.4 + VectorRand() * 60)  particle:SetDieTime(0.3)  particle:SetStartAlpha(60)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(12, 19))  particle:SetEndSize(5)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(240, 120, 240)   particle = emitter:Add("particles/smokey", pos + VectorRand() * 10)  particle:SetDieTime(math.Rand(0.2, 0.3))  particle:SetStartAlpha(math.Rand(60, 70))  particle:SetEndAlpha(0)  particle:SetStartSize(2)  particle:SetEndSize(math.Rand(20, 34))  particle:SetRoll(math.Rand(0, 359))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(240, 120, 240)  end   emitter:Finish() emitter = nil collectgarbage("step", 64) end  function ENT:OnRemove()  self.AmbientSound:Stop()   local pos = self:GetPos()   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)  local particle  for i=0, 25 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 275)  particle:SetDieTime(0.5)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(7, 9))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(245, 155, 245)  end  for i=0,5 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 5)  particle:SetDieTime(0.6)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(127, 129))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(245, 115, 245)  end  for i=1, 75 do  particle = emitter:Add("effects/splash2", pos)  particle:SetDieTime(0.6)  particle:SetColor(255, 130, 255)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(5)  particle:SetEndSize(0)  particle:SetStartLength(1)  particle:SetEndLength(15)  particle:SetVelocity(VectorRand():GetNormal() * 200)  end  emitter:Finish() emitter = nil collectgarbage("step", 64) end 