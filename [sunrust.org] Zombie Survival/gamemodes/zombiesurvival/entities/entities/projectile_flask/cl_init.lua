include("shared.lua")  local type_to_col = {     [0] = {205, 40, 40},       [1] = {50, 150, 255},     [2] = {90, 50, 210},     [3] = {30, 10, 30} }  function ENT:OnRemove()  local pos = self:GetPos()  local emitter, particle = ParticleEmitter(pos)  emitter:SetNearClip(12, 16)      local r,g,b = unpack(type_to_col[self:GetDTInt(DT_FLASK_TYPE)])   for i = 1, 60 do  local axis = Angle(0, i * (360/60), 0)  for j=1, 1 do  local offset = Vector(math.cos(axis.y) * 150, math.sin(axis.y) * 150)   particle = emitter:Add("sprites/glow04_noz", pos + offset + VectorRand() * 10)  particle:SetVelocity(self:GetUp() * 195 + VectorRand() * 30)  particle:SetGravity(Vector(0, 0, -300))  particle:SetColor(math.max(50, r), math.max(50, g), math.max(50, b))  particle:SetAirResistance(200)  particle:SetDieTime(2.2)  particle:SetStartAlpha(205)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(6, 10))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 360))  particle:SetRollDelta(math.Rand(-10, 10))  end  end   for i=1, 6 do         local axis = Angle(0, math.random(360), 0)         local offset = Vector(math.cos(axis.y) * (40 + math.random(90)), math.sin(axis.y) * (40 + math.random(90)))   particle = emitter:Add("particles/smokey", pos + offset)  particle:SetDieTime(math.Rand(2, 2.25))  particle:SetStartAlpha(50)  particle:SetEndAlpha(0)  particle:SetStartSize(100)  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 360))  particle:SetColor(r, g, b)  end   emitter:Finish() emitter = nil collectgarbage("step", 64) end 