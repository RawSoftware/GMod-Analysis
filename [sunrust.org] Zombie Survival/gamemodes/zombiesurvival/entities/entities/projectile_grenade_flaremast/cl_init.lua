include("shared.lua")  ENT.SmokeTimer = 0  local matGlow = Material("sprites/light_glow02_add") local matWhite = Material("models/debug/debugwhite")  function ENT:Initialize()  self:SetModelScale(0.1, 0)  self:SetColor(Color(255, 33, 44))  self:DrawShadow(false)   self.ProjStart = CurTime() end  function ENT:Draw()  render.ModelMaterialOverride(matWhite)  render.SetColorModulation(0.2, 0.2, 0.2)  self:DrawModel()  render.SetColorModulation(1, 1, 1)  render.ModelMaterialOverride(nil)   render.SetMaterial(matGlow)  render.DrawSprite(self:WorldSpaceCenter(), 13, 13, Color(190, 110, 10)) end  function ENT:Think()  if CurTime() - self.ProjStart < 0.6 then return end   local pos = self:GetPos()  local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)   local particle  if not self.Popped then  self.Popped = true   for i=0,2 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 5)  particle:SetDieTime(0.2)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(17, 19))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(160, 110, 60)  end  end    if self.SmokeTimer < CurTime() then  self.SmokeTimer = CurTime() + 0.04   particle = emitter:Add("particles/smokey", pos + VectorRand() * 5)  particle:SetDieTime(math.Rand(0.4, 0.6))  particle:SetStartAlpha(math.Rand(82, 83))  particle:SetEndAlpha(0)  particle:SetStartSize(2)  particle:SetEndSize(math.Rand(4, 6))  particle:SetRoll(math.Rand(0, 359))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(44, 44, 44)  end   emitter:Finish() emitter = nil collectgarbage("step", 64) end  function ENT:OnRemove()  local pos = self:GetPos()   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)  local particle  for i=0, 3 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 125)  particle:SetDieTime(0.3)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(7, 9))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(160, 110, 30)  end  for i=0,2 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 5)  particle:SetDieTime(0.2)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(87, 89))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(160, 110, 60)  end  for i=1, 15 do  particle = emitter:Add("effects/splash2", pos)  particle:SetDieTime(0.5)  particle:SetColor(175, 110, 0)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(5)  particle:SetEndSize(0)  particle:SetStartLength(1)  particle:SetEndLength(15)  particle:SetVelocity(VectorRand():GetNormal() * 90)  end  emitter:Finish() emitter = nil collectgarbage("step", 64) end 