include("shared.lua")  ENT.NextEmit = 0  local matGlow = Material("sprites/glow04_noz")  function ENT:Initialize()  self:SetColor(Color(0, 0, 0, 0))  self:SetRenderBounds(Vector(-128, -128, -128), Vector(128, 128, 128))   self.AmbientSound = CreateSound(self, "ambient/machines/combine_shield_touch_loop1.wav")  self.AmbientSound:SetSoundLevel(75)   local pos = self:GetPos()   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)  local particle  for i=0, 3 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 125)  particle:SetDieTime(1.3)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(7, 9))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(245, 65, 30)  end  for i=0,2 do  particle = emitter:Add(matGlow, pos)  particle:SetVelocity(VectorRand() * 5)  particle:SetDieTime(0.9)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(87, 89))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(-0.8, 0.8))  particle:SetRollDelta(math.Rand(-3, 3))  particle:SetColor(245, 65, 60)  end  for i=1, 15 do  particle = emitter:Add("effects/splash2", pos)  particle:SetDieTime(1.5)  particle:SetColor(255, 110, 0)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(5)  particle:SetEndSize(0)  particle:SetStartLength(1)  particle:SetEndLength(15)  particle:SetVelocity(VectorRand():GetNormal() * 90)  end  emitter:Finish() emitter = nil collectgarbage("step", 64)  end  function ENT:Draw()  self.AmbientSound:PlayEx(1, 30)   if CurTime() < self.NextEmit then return end  self.NextEmit = CurTime() + FrameTime() * 5   local pos = self:GetPos()   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)   for i = 1, 2 do  local posn = pos + VectorRand() * 50 + Vector(0, 0, 200)   local particle = emitter:Add("trails/electric", posn)  particle:SetDieTime(0.2)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(23)  particle:SetEndSize(0)  particle:SetStartLength(math.random(300, 300))  particle:SetEndLength(math.random(200, 400))  particle:SetRoll(math.Rand(0, 255))  particle:SetRollDelta(math.Rand(-10, 10))  particle:SetVelocity(Vector(0, 0, -0.1))  particle:SetColor(150, 0, 20)   particle = emitter:Add("sprites/glow04_noz", posn)  particle:SetDieTime(0.2)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(22)  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 255))  particle:SetRollDelta(math.Rand(-10, 10))  particle:SetVelocity(Vector(0, 0, -0.1))  particle:SetColor(150, 0, 20)   particle = emitter:Add("sprites/glow04_noz", posn)  particle:SetDieTime(0.2)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(32)  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 255))  particle:SetRollDelta(math.Rand(-10, 10))  particle:SetVelocity(Vector(0, 0, -99999))  particle:SetColor(150, 0, 20)  particle:SetCollide(true)  end   emitter:Finish() emitter = nil collectgarbage("step", 64) end  function ENT:OnRemove()  self.AmbientSound:Stop() end