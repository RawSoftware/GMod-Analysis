AddCSLuaFile()  SWEP.PrintName = "'Hurricane' Pulse SMG" SWEP.Description = "Fires rapid pulse shots that slow targets."  if CLIENT then  SWEP.Slot = 2  SWEP.SlotPos = 0   SWEP.HUD3DBone = "ValveBiped.base"  SWEP.HUD3DPos = Vector(2.2, -0.85, 1)  SWEP.HUD3DScale = 0.02   SWEP.ViewModelFlip = false  SWEP.ViewModelFOV = 60   SWEP.VElements = {  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0, -0.301, 4.731), angle = Angle(0, 180, 90), size = Vector(0.025, 0.025, 0.014), color = Color(255, 228, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.559, -1.04, -3.651), angle = Angle(-90, -164.752, 0), size = Vector(0.043, 0.037, 0.052), color = Color(255, 255, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.079, -2.368, -6.355), angle = Angle(-0.703, -90.113, 0), size = Vector(0.12, 0.075, 0.116), color = Color(255, 204, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(-0.002, -0.489, -8.968), angle = Angle(0, -90, -0), size = Vector(0.056, 0.019, 0.052), color = Color(255, 209, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} }  }   SWEP.WElements = {  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.773, 2.071, -5.448), angle = Angle(0, 0, -80.556), size = Vector(0.043, 0.037, 0.052), color = Color(255, 255, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.69, 0.799, -5.528), angle = Angle(0, 0, 80.789), size = Vector(0.043, 0.037, 0.052), color = Color(255, 255, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-1.594, 1.468, -3.698), angle = Angle(103.306, 180, 0), size = Vector(0.056, 0.019, 0.052), color = Color(255, 209, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(10.47, 1.462, -6.394), angle = Angle(-175.984, -88.995, 11.291), size = Vector(0.025, 0.019, 0.014), color = Color(255, 228, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-0.541, 1.491, -6.099), angle = Angle(98.305, 179.197, 0), size = Vector(0.12, 0.075, 0.116), color = Color(255, 204, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} }  } end  SWEP.Base = "weapon_zs_base" local BaseClass = baseclass.Get("weapon_zs_base")  SWEP.HoldType = "smg"  SWEP.ViewModel = "models/weapons/c_smg1.mdl" SWEP.WorldModel = "models/weapons/w_smg1.mdl" SWEP.UseHands = true  SWEP.CSMuzzleFlashes = false  SWEP.ReloadSound = Sound("weapons/smg1/smg1_reload.wav") SWEP.Primary.Sound = Sound("weapons/ar2/fire1.wav") SWEP.Primary.Damage = 17 SWEP.Primary.NumShots = 1 SWEP.Primary.Delay = 0.15  SWEP.Primary.ClipSize = 30 SWEP.Primary.Automatic = true SWEP.Primary.Ammo = "pulse" GAMEMODE:SetupDefaultClip(SWEP.Primary)  SWEP.TracerName = "AR2Tracer"  SWEP.Primary.Gesture = ACT_HL2MP_GESTURE_RANGE_ATTACK_SMG1 SWEP.ReloadGesture = ACT_HL2MP_GESTURE_RELOAD_SMG1  SWEP.ConeMax = 4.1 SWEP.ConeMin = 2.3  SWEP.WalkSpeed = SPEED_NORMAL  SWEP.Tier = 2  SWEP.PointsMultiplier = GAMEMODE.PulsePointsMultiplierLow  SWEP.IronSightsPos = Vector(-6.425, 5, 1.02) SWEP.LegDamage = 3.2 SWEP.ReloadSpeed = 0.76  SWEP.DamageScaling = 0.725  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MAX_SPREAD, -0.3) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MIN_SPREAD, -0.2) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_CLIP_SIZE, 1, 1)  local purple_plasma = Vector(200, 70, 200) local blue_plasma = Vector(85, 125, 255)  SWEP.FireModes = 2 SWEP.FireModeNames = {"Full-Auto", "Semi-Auto"} SWEP.FireModeNames3D = {"AUTO", "SEMI"}  GAMEMODE:AddNewRemantleBranch(SWEP, 1, "'Typhoon' Pulse SMG", "More pulse slow but slow to start, and gains damage and loses accuracy if spooled. The last 5 shots shoot additional plasma.", function(wept)  wept.Primary.Delay = wept.Primary.Delay * (0.2/0.15)  wept.ConeMax = wept.ConeMax * 0.3  wept.ConeMin = wept.ConeMin * 0.4  wept.LegDamage = 3   wept.GetFireDelay = function(self) return BaseClass.GetFireDelay(self) - (self:GetDTFloat(9) * 0.08) end  wept.ShootBullets = function(self, dmg, numbul, cone)  dmg = dmg + dmg * self:GetDTFloat(9) * 0.45          if SERVER and self:Clip1() <= 5 then             local ent = self:ShootProjectile(dmg * 0.33, cone, "projectile_zapper", 1600)              ent:SetDTVector(0, purple_plasma)         end   BaseClass.ShootBullets(self, dmg, numbul, cone)  end   wept.GetCone = function(self)  return BaseClass.GetCone(self) * (1 + self:GetDTFloat(9) * 1.5)  end   wept.Think = function(self)  if self:GetReloadFinish() == 0 and self:GetOwner():KeyDown(IN_ATTACK) then  self:SetDTFloat(9, math.min(self:GetDTFloat(9) + FrameTime() * 0.4, 1))  else  self:SetDTFloat(9, math.max(0, self:GetDTFloat(9) - FrameTime() * 0.4))  end   BaseClass.Think(self)  end   function wept:Deploy()  self:SetDTFloat(9, 0)  return BaseClass.Deploy(self)  end   wept.VElements = {  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0, -0.301, 4.731), angle = Angle(0, 180, 90), size = Vector(0.025, 0.025, 0.014), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.559, -1.04, -3.651), angle = Angle(-90, -164.752, 0), size = Vector(0.043, 0.037, 0.052), color = Color(45, 175, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.079, -2.368, -6.355), angle = Angle(-0.703, -90.113, 0), size = Vector(0.12, 0.075, 0.116), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(-0.002, -0.489, -8.968), angle = Angle(0, -90, -0), size = Vector(0.056, 0.019, 0.052), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} }  }   wept.WElements = {  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.773, 2.071, -5.448), angle = Angle(0, 0, -80.556), size = Vector(0.043, 0.037, 0.052), color = Color(45, 175, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.69, 0.799, -5.528), angle = Angle(0, 0, 80.789), size = Vector(0.043, 0.037, 0.052), color = Color(45, 175, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-1.594, 1.468, -3.698), angle = Angle(103.306, 180, 0), size = Vector(0.056, 0.019, 0.052), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(10.47, 1.462, -6.394), angle = Angle(-175.984, -88.995, 11.291), size = Vector(0.025, 0.019, 0.014), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-0.541, 1.491, -6.099), angle = Angle(98.305, 179.197, 0), size = Vector(0.12, 0.075, 0.116), color = Color(255, 145, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} }  }    wept.PreDrawViewModel = function(self, vm)  render.SetColorModulation(0.7, 0.3, 1)   BaseClass.PreDrawViewModel(self, vm)  end  wept.PostDrawViewModel = function(self, vm)  render.SetColorModulation(1, 1, 1)   BaseClass.PostDrawViewModel(self, vm)  end end).CollectiveName = "Typhoon" local branch = GAMEMODE:AddNewRemantleBranch(SWEP, 2, "'Monsoon' Pulse SMG", "Slows down while firing, but gains damage and accuracy. The last 5 shots shoot plasma.", function(wept)  wept.GetFireDelay = function(self) return BaseClass.GetFireDelay(self) + (self:GetDTFloat(9) * 0.12) end     wept.Primary.Damage = wept.Primary.Damage * 0.9     wept.ConeMax = wept.ConeMax * 1.3  wept.ConeMin = wept.ConeMin * 1.3  wept.ShootBullets = function(self, dmg, numbul, cone)  dmg = dmg + dmg * self:GetDTFloat(9) * 0.25          if SERVER and self:Clip1() <= 5 then             local ent = self:ShootProjectile(dmg * 0.33, cone, "projectile_zapper", 1600)              ent:SetDTVector(0, blue_plasma)         end   BaseClass.ShootBullets(self, dmg, numbul, cone)  end   wept.GetCone = function(self)  return BaseClass.GetCone(self) * (1 - self:GetDTFloat(9) * 0.65)  end   wept.Think = function(self)  if self:GetReloadFinish() == 0 and self:GetOwner():KeyDown(IN_ATTACK) then  self:SetDTFloat(9, math.min(self:GetDTFloat(9) + FrameTime() * 0.5, 1))  else  self:SetDTFloat(9, math.max(0, self:GetDTFloat(9) - FrameTime() * 0.5))  end   BaseClass.Think(self)  end   function wept:Deploy()  self:SetDTFloat(9, 0)  return BaseClass.Deploy(self)  end   wept.VElements = {  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0, -0.301, 4.731), angle = Angle(0, 180, 90), size = Vector(0.025, 0.025, 0.014), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} },  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.559, -1.04, -3.651), angle = Angle(-90, -164.752, 0), size = Vector(0.043, 0.037, 0.052), color = Color(0, 0, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(0.079, -2.368, -6.355), angle = Angle(-0.703, -90.113, 0), size = Vector(0.12, 0.075, 0.116), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.base", rel = "", pos = Vector(-0.002, -0.489, -8.968), angle = Angle(0, -90, -0), size = Vector(0.056, 0.019, 0.052), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} }  }   wept.WElements = {  ["base+++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.773, 2.071, -5.448), angle = Angle(0, 0, -80.556), size = Vector(0.043, 0.037, 0.052), color = Color(0, 0, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++++"] = { type = "Model", model = "models/props_c17/light_domelight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.69, 0.799, -5.528), angle = Angle(0, 0, 80.789), size = Vector(0.043, 0.037, 0.052), color = Color(0, 0, 255, 255), surpresslightning = true, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-1.594, 1.468, -3.698), angle = Angle(103.306, 180, 0), size = Vector(0.056, 0.019, 0.052), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} },  ["base"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(10.47, 1.462, -6.394), angle = Angle(-175.984, -88.995, 11.291), size = Vector(0.025, 0.019, 0.014), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_combine/eli_pod_inner.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-0.541, 1.491, -6.099), angle = Angle(98.305, 179.197, 0), size = Vector(0.12, 0.075, 0.116), color = Color(85, 125, 255, 255), surpresslightning = false, material = "models/props_wasteland/quarryobjects01", skin = 0, bodygroup = {} }  }   local mat = Material("models/props_wasteland/quarryobjects01")  wept.PreDrawViewModel = function(self, vm)  render.MaterialOverrideByIndex(1, mat)  render.SetColorModulation(85/255, 125/255, 255/255)   BaseClass.PreDrawViewModel(self, vm)  end  wept.PostDrawViewModel = function(self, vm)  render.MaterialOverrideByIndex(0)  render.SetColorModulation(1, 1, 1)   BaseClass.PostDrawViewModel(self, vm)  end end) branch.CollectiveName = "Monsoon" branch.Colors = {Color(160, 170, 220), Color(110, 120, 170), Color(90, 100, 150), Color(70, 80, 130)}  function SWEP:EmitFireSound()  self:EmitSound("weapons/ar2/fire1.wav", 75, math.random(110, 120)) end  function SWEP.BulletCallback(attacker, tr, dmginfo, curpen)  local ent = tr.Entity  if ent:IsValid() and ent:IsPlayer() and ent:Team() == TEAM_UNDEAD then  local activ = attacker:GetActiveWeapon()  ent:AddLegDamageExt(activ.LegDamage / (curpen + 1), attacker, activ, SLOWTYPE_PULSE)  end   if IsFirstTimePredicted() then  util.CreatePulseImpactEffect(tr.HitPos, tr.HitNormal)  end end  SWEP.PreDrawViewModel = function(self, vm)  render.SetColorModulation(1, 1, 0.5)   BaseClass.PreDrawViewModel(self, vm) end SWEP.PostDrawViewModel = function(self, vm)  render.SetColorModulation(1, 1, 1)   BaseClass.PostDrawViewModel(self, vm) end