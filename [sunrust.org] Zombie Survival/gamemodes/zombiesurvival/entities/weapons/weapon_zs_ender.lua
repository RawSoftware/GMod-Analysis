AddCSLuaFile()  SWEP.PrintName = "'Ender' Automatic Shotgun" SWEP.Description = "Relatively accurate, clip loaded, automatic shotgun. Gives you 1 shield stack on kill, that greatly reduces damage you take for one hit."  SWEP.Slot = 3 SWEP.SlotPos = 0  if CLIENT then  SWEP.ViewModelFlip = false  SWEP.ViewModelFOV = 60   SWEP.HUD3DBone = "v_weapon.galil"  SWEP.HUD3DPos = Vector(1, 0, 6)  SWEP.HUD3DScale = 0.017   SWEP.VElements = {  ["body2"] = { type = "Model", model = "models/Mechanics/robotics/a1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body", pos = Vector(6.439, 0, 6.04), angle = Angle(0, 0, 0), size = Vector(0.493, 0.157, 0.3), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body2_ridge++"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(0.041, 0.856, 0.517), angle = Angle(0, 0, 0), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["ring_top_laser"] = { type = "Model", model = "models/props/de_inferno/picture1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(-4.442, 0, 2.459), angle = Angle(0, 0, 0), size = Vector(0.009, 0.039, 0.035), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/weapons/v_smg1/texture5", skin = 0, bodygroup = {} },  ["body2_ridge"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(1.195, 0, 1.713), angle = Angle(0, 0, -90), size = Vector(0.16, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body"] = { type = "Model", model = "models/weapons/w_rif_ak47.mdl", bone = "v_weapon.galil", rel = "", pos = Vector(0.002, 6.406, 5.985), angle = Angle(90, -90, 0), size = Vector(0.85, 1.256, 0.85), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["ring_top"] = { type = "Model", model = "models/props/cs_office/radio_p2.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(-4.356, 0, -0.768), angle = Angle(0, 0, 0), size = Vector(2.107, 0.087, 0.365), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body2_ridge+"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(0.041, -0.883, 0.517), angle = Angle(0, 0, -180), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} }  }   SWEP.WElements = {  ["body2"] = { type = "Model", model = "models/Mechanics/robotics/a1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body", pos = Vector(6.439, 0, 6.04), angle = Angle(0, 0, 0), size = Vector(0.493, 0.157, 0.3), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body2_ridge++"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(0.041, 0.856, 0.517), angle = Angle(0, 0, 0), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["ring_top_laser"] = { type = "Model", model = "models/props/de_inferno/picture1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(-4.442, 0, 2.459), angle = Angle(0, 0, 0), size = Vector(0.009, 0.039, 0.035), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/weapons/v_smg1/texture5", skin = 0, bodygroup = {} },  ["body2_ridge"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(1.195, 0, 1.713), angle = Angle(0, 0, -90), size = Vector(0.16, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body"] = { type = "Model", model = "models/weapons/w_rif_ak47.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(11.178, 1.041, 1.702), angle = Angle(-12.15, 0.085, 180), size = Vector(0.85, 1.256, 0.85), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["ring_top"] = { type = "Model", model = "models/props/cs_office/radio_p2.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(-4.356, 0, -0.768), angle = Angle(0, 0, 0), size = Vector(2.107, 0.087, 0.365), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },  ["body2_ridge+"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(0.041, -0.883, 0.517), angle = Angle(0, 0, -180), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} }  } end  SWEP.Base = "weapon_zs_base" local BaseClass = baseclass.Get("weapon_zs_base")  SWEP.HoldType = "shotgun"  SWEP.ViewModel = "models/weapons/cstrike/c_rif_galil.mdl" SWEP.WorldModel = "models/weapons/w_rif_galil.mdl" SWEP.ShowViewModel = false SWEP.ShowWorldModel = false  SWEP.UseHands = true  SWEP.Primary.Sound = Sound(")weapons/galil/galil-1.wav") SWEP.Primary.Damage = 7.5 SWEP.Primary.NumShots = 11 SWEP.Primary.Delay = 0.4  SWEP.Primary.ClipSize = 8 SWEP.Primary.Automatic = true SWEP.Primary.Ammo = "buckshot" GAMEMODE:SetupDefaultClip(SWEP.Primary)  SWEP.ConeMax = 5.625 SWEP.ConeMin = 4.875  SWEP.WalkSpeed = SPEED_SLOWER  SWEP.Tier = 3  SWEP.AmmoTrinketOverride = 2  SWEP.Stability = 85  SWEP.SpreadPattern = {     {0, 0},     {90, 0.6},     {45, 0.6},     {135, 0.6},     {225, 0.6},     {315, 0.6},     {270, 0.6},     {90, 1},     {180, 0.9},     {270, 1},     {0, 0.9} }  SWEP.Pens = 0 SWEP.PenTaper = 0.2  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MAX_SPREAD, -0.503, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MIN_SPREAD, -0.38, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_FIRE_DELAY, -0.04) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_CLIP_SIZE, 1) local branch = GAMEMODE:AddNewRemantleBranch(SWEP, 1, "'Ender' Automatic Slug Rifle", "Single accurate slug round, less total damage. Upgraded versions can pierce on headshot.", function(wept)  wept.Primary.Damage = wept.Primary.Damage * 5.95  wept.Primary.NumShots = 1  wept.ConeMin = wept.ConeMin * 0.3  wept.ConeMax = wept.ConeMax * 0.3     wept.AmmoTrinketOverride = nil     wept.ResistanceAmmoAs = "357"     wept.SpreadPattern = nil      wept.PenHeadOnly = true end) branch.CollectiveName = "Slug" GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_FIRE_DELAY, -0.04) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_CLIP_SIZE, 1) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_BULLET_PIERCES, 1) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_PIERCE_DAMAGE, 0.05, 3) branch = GAMEMODE:AddNewRemantleBranch(SWEP, 2, "'Reckoner' Shield Shotgun", "Can block with alternate fire, but small clip size, lower fire rate, and a bit more base damage. Blocked attacks reload some ammo.", function(wept)     AccessorFuncDT(wept, "BlockEnd", "Float", 10)      wept.VElements = {         ["body2"] = { type = "Model", model = "models/Mechanics/robotics/a1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body", pos = Vector(6.439, 0, 6.04), angle = Angle(0, 0, 0), size = Vector(0.493, 0.157, 0.3), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["ring_top_laser"] = { type = "Model", model = "models/props/de_inferno/picture1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(-4.442, 0, 2.459), angle = Angle(0, 0, 0), size = Vector(0.009, 0.039, 0.035), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/weapons/v_smg1/texture5", skin = 0, bodygroup = {} },         ["body2_ridge"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(1.195, 0, 1.713), angle = Angle(0, 0, -90), size = Vector(0.16, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body2_ridge++"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(0.041, 0.856, 0.517), angle = Angle(0, 0, 0), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["shield_attachment"] = { type = "Model", model = "models/Mechanics/robotics/g1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body", pos = Vector(1.934, 1.534, 6.486), angle = Angle(0, 180, 0), size = Vector(0.123, 0.118, 0.032), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body2_ridge+"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(0.041, -0.883, 0.517), angle = Angle(0, 0, -180), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body"] = { type = "Model", model = "models/weapons/w_rif_ak47.mdl", bone = "v_weapon.galil", rel = "", pos = Vector(0.002, 6.406, 5.985), angle = Angle(90, -90, 0), size = Vector(0.85, 1.256, 0.85), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["ring_top"] = { type = "Model", model = "models/props/cs_office/radio_p2.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body2", pos = Vector(-4.356, 0, -0.768), angle = Angle(0, 0, 0), size = Vector(2.107, 0.087, 0.365), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["shield"] = { type = "Model", model = "models/props_phx/construct/windows/window_curve180x1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body", pos = Vector(-7.067, 2.306, 1.475), angle = Angle(0, 90, 90), size = Vector(0.048, 0.148, 0.382), color = Color(65, 65, 65, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} }     }      wept.WElements = {         ["body2"] = { type = "Model", model = "models/Mechanics/robotics/a1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body", pos = Vector(6.439, 0, 6.04), angle = Angle(0, 0, 0), size = Vector(0.493, 0.157, 0.3), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["SHIELD"] = { type = "Model", model = "models/props_phx/construct/windows/window_curve180x1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body", pos = Vector(-7.067, 2.306, 1.475), angle = Angle(0, 90, 90), size = Vector(0.048, 0.148, 0.382), color = Color(65, 65, 65, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },         ["ring_top_laser"] = { type = "Model", model = "models/props/de_inferno/picture1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(-4.442, 0, 2.459), angle = Angle(0, 0, 0), size = Vector(0.009, 0.039, 0.035), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/weapons/v_smg1/texture5", skin = 0, bodygroup = {} },         ["body2_ridge"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(1.195, 0, 1.713), angle = Angle(0, 0, -90), size = Vector(0.16, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body2_ridge++"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(0.041, 0.856, 0.517), angle = Angle(0, 0, 0), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["SHIELD_attachment"] = { type = "Model", model = "models/Mechanics/robotics/g1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body", pos = Vector(1.934, 1.534, 6.486), angle = Angle(0, 180, 0), size = Vector(0.123, 0.118, 0.032), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body"] = { type = "Model", model = "models/weapons/w_rif_ak47.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(11.178, 1.041, 1.702), angle = Angle(-12.15, 0.085, 180), size = Vector(0.85, 1.256, 0.85), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["ring_top"] = { type = "Model", model = "models/props/cs_office/radio_p2.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(-4.356, 0, -0.768), angle = Angle(0, 0, 0), size = Vector(2.107, 0.087, 0.365), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} },         ["body2_ridge+"] = { type = "Model", model = "models/Mechanics/gears2/pinion_20t1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body2", pos = Vector(0.041, -0.883, 0.517), angle = Angle(0, 0, -180), size = Vector(0.201, 0.098, 0.089), color = Color(65, 65, 65, 255), surpresslightning = false, material = "phoenix_storms/metal_plate", skin = 0, bodygroup = {} }     }      wept.Primary.Delay = wept.Primary.Delay * 1.4     wept.Primary.ClipSize = wept.Primary.ClipSize - 3     wept.Primary.Damage = wept.Primary.Damage * 1.23     wept.WalkSpeed = SPEED_SLOWEST     wept.ShieldBlock = true      function wept:EmitFireSound()         self:EmitSound("weapons/g3sg1/g3sg1-1.wav", 75, math.random(137, 143), 0.4)         self:EmitSound("weapons/zs_shieldshot/zs_reckoner.ogg", 75, math.random(142, 148), 0.6, CHAN_WEAPON + 20)     end      function wept:Think()         BaseClass.Think(self)          local owner = self:GetOwner()         local blocking = self:IsBlocking()         local reloading = self:GetReloadFinish() > 0         local holdingright = owner:KeyDown(IN_ATTACK2)         local canattack = self:GetNextPrimaryFire() <= CurTime()          if self.Stability then             local block_end = self:GetBlockEnd()             local timesincelast = math.Clamp(block_end - CurTime(), 0, 0.5)              if not blocking and block_end ~= 0 and block_end < CurTime() then                 owner:ResetSpeed()                 owner:ResetStaminaRegen()                  self:SetBlockEnd(0)             end              if (not canattack or not holdingright or reloading) and blocking then                 self:SetBlocking(false)                 self:SetBlockEnd(CurTime() + (0.3 - timesincelast))                  if SERVER and owner:IsSkillActive(SKILL_GUARDIAN) then                     net.Start("zs_guardian_state")                         net.WriteEntity(owner)                         net.WriteBool(false)                     net.Broadcast()                 end                  owner:ResetSpeed()                 owner:ResetStaminaRegen()             elseif canattack and holdingright and not reloading and not blocking and not owner:GetBarricadeGhosting() then                 self:SetBlocking(true)                 self:SetBlockEnd(CurTime() + (0.3 - timesincelast))                  if SERVER and owner:IsSkillActive(SKILL_GUARDIAN) then                     net.Start("zs_guardian_state")                         net.WriteEntity(owner)                         net.WriteBool(true)                     net.Broadcast()                 end                  owner:ResetSpeed()                 owner:ResetStaminaRegen()             end         end     end      wept.BlockRotation = Angle(0, 40, -10)     wept.BlockOffset = Vector(-5, 3, -2)      wept.BlockReduction = 0.3      function wept:IsBlocking()         return self:GetDTBool(10)     end      function wept:SetBlocking(block)         self:SetDTBool(10, block)     end      function wept:OnBlockedAttack()         local owner = self:GetOwner()          local max1 = self:GetPrimaryClipSize()         local ammotype = self:GetPrimaryAmmoType()         local spare = owner:GetAmmoCount(ammotype)         local current = self:Clip1()         local needed = math.min(2, max1 - current)          needed = math.min(spare, needed)          self:SetClip1(current + needed)         if SERVER then             owner:RemoveAmmo(needed, ammotype)         end     end      if CLIENT then         local add_lerp = Vector(0, 0, 0)         local add_angle = Angle(0, 0, 0)          function wept:CalcViewModelView(vm, oldpos, oldang, pos, ang)             local rot = self.BlockRotation             local offset = -self.BlockOffset              ang = Angle(ang.pitch, ang.yaw, ang.roll)                local swingend = self:GetBlockEnd()             local delta = 0.3 - math.Clamp(swingend - CurTime(), 0, 0.3)             local power = CosineInterpolation(0, 1, delta / 0.3)             power = self:IsBlocking() and power or 1 - power              local new_lerp = offset.x * power * ang:Right() + offset.y * power * ang:Forward() + offset.z * power * ang:Up()             local new_ang = Angle(rot.pitch * power, rot.yaw * power, rot.roll * power)              add_lerp = LerpVector(0.13 * FrameTime() * 100, add_lerp, new_lerp)             add_angle = LerpAngle(0.05 * FrameTime() * 100, add_angle, new_ang)              pos = pos + add_lerp              ang:RotateAroundAxis(ang:Right(), add_angle.pitch)             ang:RotateAroundAxis(ang:Up(), add_angle.yaw)             ang:RotateAroundAxis(ang:Forward(), add_angle.roll)              return BaseClass.GetViewModelPosition(self, pos, ang)         end     end      function wept:CanPrimaryAttack()         if self:IsBlocking() or self:GetBlockEnd() > CurTime() then return end          return BaseClass.CanPrimaryAttack(self)     end      function wept:SecondaryAttack()     end      function wept:OnZombieKilled()     end end) branch.CollectiveName = "Shield" branch.Colors = {Color(190, 220, 210), Color(140, 170, 160), Color(100, 170, 145), Color(70, 150, 100)} GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_BLOCK_STAB, 5, 1) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_CLIP_SIZE, 1) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_FIRE_DELAY, -0.04)  function SWEP:EmitFireSound()  self:EmitSound("weapons/g3sg1/g3sg1-1.wav", 75, math.random(147, 153), 0.5)  self:EmitSound("weapons/shotgun/shotgun_fire6.wav", 75, math.random(142, 148), 0.4, CHAN_WEAPON + 20) end  function SWEP:OnZombieKilled()     local killer = self:GetOwner()      if killer:IsValid() then         killer:GiveStack("shield", 1)     end end