include("shared.lua")  SWEP.Slot = 3 SWEP.SlotPos = 0  SWEP.ViewModelFlip = false SWEP.ViewModelFOV = 66  SWEP.HUD3DBone = "ValveBiped.Gun" SWEP.HUD3DPos = Vector(-0.25, -2.5, 0) SWEP.HUD3DAng = Angle(180, 0, 0) SWEP.HUD3DScale = 0.035  SWEP.VElements = {  ["pipes+"] = { type = "Model", model = "models/props_lab/pipesystem02e.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(18.132, 3.348, 0), angle = Angle(90, 180, 0), size = Vector(0.5, 0.289, 0.326), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["handle1+"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(11.119, 0, 4.769), angle = Angle(0, 0, 0), size = Vector(0.059, 0.034, 0.143), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes_body"] = { type = "Model", model = "models/props_lab/tpplug.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle1", pos = Vector(-3.362, 0, -4.619), angle = Angle(0, 0, 0), size = Vector(0.709, 0.449, 0.504), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipeholders"] = { type = "Model", model = "models/props_pipes/pipe02_yjoint02.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body", pos = Vector(1.297, 4.778, 0), angle = Angle(90, 180, 0), size = Vector(0.319, 0.179, 0.179), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes"] = { type = "Model", model = "models/props_lab/pipesystem02e.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(18.132, -3.092, 0), angle = Angle(-90, 0, 0), size = Vector(0.5, 0.289, 0.326), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["back1"] = { type = "Model", model = "models/XQM/cylinderx1.mdl", bone = "ValveBiped.Gun", rel = "", pos = Vector(0.028, 0, -8.917), angle = Angle(85, 90, 0), size = Vector(0.5, 0.384, 0.384), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["back2"] = { type = "Model", model = "models/alyx_emptool_prop.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(-2.316, 0, 2.953), angle = Angle(-90, 90, 0), size = Vector(0.973, 1.949, 2.105), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["body"] = { type = "Model", model = "models/props_c17/light_decklight01_off.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(9.618, 0, 1.274), angle = Angle(-90, 90, 0), size = Vector(0.384, 0.694, 0.223), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["handle1"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "back1", pos = Vector(6.177, 0, 4.576), angle = Angle(0, 0, 0), size = Vector(0.057, 0.034, 0.118), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes_body+"] = { type = "Model", model = "models/props_lab/tpplug.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle1", pos = Vector(4.168, 0, -4.619), angle = Angle(0, 0, 0), size = Vector(0.829, 0.449, 0.504), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} } }  SWEP.WElements = {  ["pipes+"] = { type = "Model", model = "models/props_lab/pipesystem02e.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(18.132, 3.348, 0), angle = Angle(90, 180, 0), size = Vector(0.5, 0.289, 0.326), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["handle1+"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(11.119, 0, 4.769), angle = Angle(0, 0, 0), size = Vector(0.059, 0.034, 0.143), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes_body"] = { type = "Model", model = "models/props_lab/tpplug.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle1", pos = Vector(-3.362, 0, -4.619), angle = Angle(0, 0, 0), size = Vector(0.709, 0.449, 0.504), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipeholders"] = { type = "Model", model = "models/props_pipes/pipe02_yjoint02.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body", pos = Vector(1.297, 4.778, 0), angle = Angle(90, 180, 0), size = Vector(0.319, 0.179, 0.179), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes"] = { type = "Model", model = "models/props_lab/pipesystem02e.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(18.132, -3.092, 0), angle = Angle(-90, 0, 0), size = Vector(0.5, 0.289, 0.326), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["back1"] = { type = "Model", model = "models/XQM/cylinderx1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(-3.155, 1.125, -3.889), angle = Angle(-9.032, 0, 0), size = Vector(0.5, 0.384, 0.384), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["back2"] = { type = "Model", model = "models/alyx_emptool_prop.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(-2.316, 0, 2.953), angle = Angle(-90, 90, 0), size = Vector(0.973, 1.949, 2.105), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["body"] = { type = "Model", model = "models/props_c17/light_decklight01_off.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(9.618, 0, 1.274), angle = Angle(-90, 90, 0), size = Vector(0.384, 0.694, 0.223), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["handle1"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "back1", pos = Vector(6.177, 0, 4.576), angle = Angle(0, 0, 0), size = Vector(0.057, 0.034, 0.118), color = Color(135, 135, 135, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} },  ["pipes_body+"] = { type = "Model", model = "models/props_lab/tpplug.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle1", pos = Vector(4.168, 0, -4.619), angle = Angle(0, 0, 0), size = Vector(0.829, 0.449, 0.504), color = Color(205, 205, 205, 255), surpresslightning = false, material = "models/props_canal/canal_bridge_railing_01b", skin = 0, bodygroup = {} } }  SWEP.ViewModelBoneMods = {  ["ValveBiped.Gun"] = { scale = Vector(1, 1, 1), pos = Vector(9, -2, -5), angle = Angle(0, 0, 0) }, } SWEP.ViewModelBoneModsNoCentre = {  ["ValveBiped.Gun"] = { scale = Vector(1, 1, 1), pos = Vector(0, -2, -5), angle = Angle(0, 0, 0) }, }  local colBG = Color(16, 16, 16, 90) local colRed = Color(220, 0, 0, 230) local colWhite = Color(220, 220, 220, 230)  local function DrawHeatBar(self, x, y, wid, hei, is3d)  local heatcolor = (1 - (self:GetShortHeat() + self:GetLongHeat())) * 220  colWhite.g = heatcolor  colWhite.b = heatcolor  colWhite.a = 230   local shortdiv = self:GetShortHeat()  local longdiv = self:GetLongHeat()  local barheight = 20  local bary = y + hei * 0.6  local barshortwid = math.max(wid * shortdiv - 8, 0)  local barlongwid = math.max(wid * longdiv - 8, 0)   surface.SetDrawColor(0, 0, 0, 220)  surface.DrawRect(x, bary, wid - 8, barheight)  surface.SetDrawColor(255, 30, 10, 220)  surface.DrawRect(x + 4, bary + 4, barlongwid, barheight - 8)  surface.SetDrawColor(255, 190, 0, 220)  surface.DrawRect(x + 4 + barlongwid, bary + 4, barshortwid, barheight - 8)  surface.SetDrawColor(100, 0, 0, 255)  surface.DrawRect(x - 12 + wid, bary - 4, 4, barheight + 8)   if self:GetGunState() == 2 then  colWhite.b = 0  colWhite.g = 0  if ((CurTime() * 4) % 2) > 1 then  colWhite.a = 0  else  draw.SimpleTextBlurry("VENTING", is3d and "ZS3D2DFontSmaller" or "ZSHUDFontSmaller", x + wid/2, bary + hei * 0.15, colRed, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)  end  end end  function SWEP:Draw2DHUD()  local screenscale = BetterScreenScale()   local wid, hei = 180 * screenscale, 64 * screenscale  local x, y = ScrW() - wid - screenscale * 128, ScrH() - hei - screenscale * 72  local spare = self:GetPrimaryAmmoCount()   local yy = ScrH() - hei * 2 - screenscale * 84   DrawHeatBar(self, x + wid * 0.25 - wid/4, yy + hei * 0.2, wid, hei)   draw.RoundedBox(16, x, y, wid, hei, colBG)  draw.SimpleTextBlurry(spare, spare >= 1000 and "ZSHUDFont" or "ZSHUDFontBig", x + wid * 0.5, y + hei * 0.5, spare == 0 and colRed or colWhite, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)  draw.SimpleTextBlurry("Heat", "ZSHUDFont", x + wid * 0.5, yy + hei * 0.45, colRed, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER) end  function SWEP:Draw3DHUD(vm, pos, ang)  local wid, hei = 180, 64  local x, y = wid * -0.6, hei * -0.5  local spare = self:GetPrimaryAmmoCount()   cam.Start3D2D(pos, ang, self.HUD3DScale / 2)  DrawHeatBar(self, x + wid * 0.25 - wid/4, y - hei * 1, wid, hei, true)   draw.RoundedBoxEx(32, x, y, wid, hei, colBG, true, false, true, false)  draw.SimpleTextBlurry(spare, spare >= 1000 and "ZS3D2DFontSmall" or "ZS3D2DFont", x + wid * 0.5, y + hei * 0.5, spare == 0 and colRed or colWhite, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)  draw.SimpleTextBlurry("Heat", "ZS3D2DFontSmall", x + wid * 0.5, y - hei * 1, colRed, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)  cam.End3D2D() end  local matBeam = Material("trails/electric") function SWEP:PostDrawViewModel(vm, pl, wep)  if self.HUD3DPos and GAMEMODE:ShouldDraw3DWeaponHUD() then  local pos, ang = self:GetHUD3DPos(vm)  if pos then  self:Draw3DHUD(vm, pos, ang)  end  end   if self:GetGunState() == 1 then return end   local attachposlocal = vm:WorldToLocal(vm:GetAttachment(2).Pos)   local base_vec = Vector(52, 2, 1.5)   local atch_pos_1 = vm:LocalToWorld(attachposlocal + base_vec + Vector(0, 7, 0)) + VectorRand() * 0.1  local atch_pos_2 = vm:LocalToWorld(attachposlocal + base_vec + Vector(0, -7, 0)) + VectorRand() * 0.1   render.SetMaterial(matBeam)  render.DrawBeam(atch_pos_1, atch_pos_2, 1, math.random(1, 2), 1 + math.random(1, 18), Color(160, 195, 195)) end  function SWEP:FireAnimationEvent( pos, ang, event, options )  if event == 21 then return true end  if event == 5003 then return true end end 