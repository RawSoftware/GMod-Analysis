AddCSLuaFile()  SWEP.PrintName = "'Oberon' Pulse Shotgun" SWEP.Description = "Fires a spread of pulse shots that slow targets. Can be overclocked with fire mode selection to fire faster at the cost of more ammo."  if CLIENT then  SWEP.Slot = 3  SWEP.SlotPos = 0   SWEP.ViewModelFlip = false  SWEP.ViewModelFOV = 60   SWEP.HUD3DBone = "ValveBiped.Gun"  SWEP.HUD3DPos = Vector(2.12, -1, -8.3)  SWEP.HUD3DScale = 0.025   SWEP.ShowViewModel = true  SWEP.ShowWorldModel = false   SWEP.VElements = {  ["body2"] = { type = "Model", model = "models/props_combine/breenpod.mdl", bone = "ValveBiped.Pump", rel = "", pos = Vector(0, -0.248, -4.202), angle = Angle(6.359, 90, 0), size = Vector(0.142, 0.15, 0.216), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["barrels"] = { type = "Model", model = "models/props_pipes/pipeset08d_64_001a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body1", pos = Vector(1.284, -0.343, 11.064), angle = Angle(90, 180, 0), size = Vector(0.134, 0.23, 0.215), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["body3"] = { type = "Model", model = "models/props_combine/headcrabcannister01a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body1", pos = Vector(2.931, -0.144, -3.681), angle = Angle(-90, 90, 90), size = Vector(0.224, 0.078, 0.071), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/combine_lock01", skin = 0, bodygroup = {} },  ["red"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body1", pos = Vector(0, 0, -23.41), angle = Angle(0, 0, 90), size = Vector(0.126, 0.31, 0.052), color = Color(5, 255, 255, 255), surpresslightning = false, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["shell"] = { type = "Model", model = "models/Items/combine_rifle_ammo01.mdl", bone = "ValveBiped.square", rel = "", pos = Vector(0, 0, 2.219), angle = Angle(180, 0, 0), size = Vector(0.303, 0.303, 0.367), color = Color(255, 0, 0, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["body1"] = { type = "Model", model = "models/props_combine/combineinnerwall001a.mdl", bone = "ValveBiped.Gun", rel = "", pos = Vector(0.216, 1.08, 9.14), angle = Angle(0, 90, 0), size = Vector(0.021, 0.02, 0.041), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["back"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "body1", pos = Vector(0, -0.161, -22.364), angle = Angle(-180, 90, 90), size = Vector(0.027, 0.035, 0.026), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/combine_mortar01b", skin = 0, bodygroup = {} }  }   SWEP.WElements = {  ["body2"] = { type = "Model", model = "models/props_combine/breenpod.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(-0.745, 0, -8.099), angle = Angle(9.831, 0, 0), size = Vector(0.101, 0.15, 0.156), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["barrels"] = { type = "Model", model = "models/props_pipes/pipeset08d_64_001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(-0.504, -0.5, 8.692), angle = Angle(85.8, 180, 0), size = Vector(0.063, 0.23, 0.215), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["body3"] = { type = "Model", model = "models/props_combine/headcrabcannister01a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(2.188, -0.185, 0.388), angle = Angle(-94.75, 180, 180), size = Vector(0.134, 0.078, 0.071), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/combine_lock01", skin = 0, bodygroup = {} },  ["handle"] = { type = "Model", model = "models/weapons/w_pist_glock18.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(-6.875, -0.13, -17.975), angle = Angle(94.901, 0, 180), size = Vector(1.363, 1, 1), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["red"] = { type = "Model", model = "models/props_junk/cardboard_box001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(1.445, -0.231, -14.731), angle = Angle(5, 0, 90), size = Vector(0.126, 0.31, 0.052), color = Color(5, 255, 255, 255), surpresslightning = false, material = "models/error/new light1", skin = 0, bodygroup = {} },  ["body1"] = { type = "Model", model = "models/props_combine/combineinnerwall001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(20.476, 1.166, -7.288), angle = Angle(-100.471, -0.06, 0), size = Vector(0.021, 0.02, 0.019), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/headcrabcannister01b", skin = 0, bodygroup = {} },  ["back"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "body1", pos = Vector(0.56, -0.16, -12.83), angle = Angle(-180, 90, 95), size = Vector(0.027, 0.032, 0.026), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_combine/combine_mortar01b", skin = 0, bodygroup = {} }  }   function SWEP:PreDrawViewModel(vm)  self.BaseClass.PreDrawViewModel(self, vm)   local colV = self.VElements["red"].color  colV.r = math.Approach(colV.r, self:GetFireMode() ~= 1 and 5 or 255, FrameTime() * 400)  end end  SWEP.Base = "weapon_zs_baseshotgun"  SWEP.HoldType = "shotgun"  SWEP.ViewModel = "models/weapons/c_shotgun.mdl" SWEP.WorldModel = "models/weapons/w_shotgun.mdl" SWEP.UseHands = true  SWEP.CSMuzzleFlashes = false  SWEP.Primary.Sound = Sound("weapons/gauss/fire1.wav") SWEP.Primary.Damage = 13 SWEP.Primary.NumShots = 5 SWEP.Primary.Delay = 0.8  SWEP.FireAnimSpeed = 0.55  SWEP.Primary.ClipSize = 7 SWEP.Primary.Automatic = false SWEP.Primary.Ammo = "pulse" SWEP.Primary.DefaultClip = 30  SWEP.ConeMax = 5.5 SWEP.ConeMin = 4.75  SWEP.ReloadDelay = 0.4  SWEP.WalkSpeed = SPEED_SLOWER  SWEP.TracerName = "AR2Tracer"  SWEP.PumpSound = Sound("weapons/shotgun/shotgun_cock.wav") SWEP.ReloadSound = Sound("weapons/shotgun/shotgun_reload1.wav")  SWEP.LegDamage = 9 SWEP.Tier = 3  SWEP.PointsMultiplier = GAMEMODE.PulsePointsMultiplier  SWEP.SpreadPattern = {  {0, 0},  {90, 0.45},  {15, 0.75},  {270, 0.45},  {165, 0.75} }  SWEP.FireModes = 2 SWEP.FireModeNames = {"Normal", "Overclocked"} SWEP.FireModeNames3D = {"NRML", "OVCL"}  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_LEG_DAMAGE, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_FIRE_DELAY, -0.05, 1) local branch = GAMEMODE:AddNewRemantleBranch(SWEP, 1, "'Servitor' Pulse Slugger", "Fires more accurate slug rounds, increased resistance penetration, less total damage, more individual pulse slow, refreshes zapper cooldown on kill, no overclocked fire mode.", function(wept)  wept.Primary.Damage = wept.Primary.Damage * 3.7  wept.Primary.NumShots = 1  wept.ConeMin = wept.ConeMin * 0.35  wept.ConeMax = wept.ConeMax * 0.35  wept.LegDamage = wept.LegDamage * 1.2  wept.SpreadPattern = nil  wept.ResistanceAmmoAs = "pistol"  wept.FireModes = 1   if CLIENT then  wept.VElements["red"].color = Color(55, 255, 100)  wept.VElements["shell"].color = Color(55, 255, 100)  wept.WElements["red"].color = Color(55, 255, 100)  end   wept.OnZombieKilled = function(self)  local killer = self:GetOwner()   if killer:IsValid() then  for _,v in pairs(ents.FindByClass("prop_zapper*")) do  if v:GetObjectOwner() == killer then  v:SetNextZap(0)  end  end  end  end end) branch.CollectiveName = "Servitor" branch.Colors = {Color(170, 220, 170), Color(120, 170, 120), Color(100, 160, 100), Color(80, 150, 80)}  function SWEP.BulletCallback(attacker, tr, dmginfo, curpen)  local ent = tr.Entity  if ent:IsValidLivingZombie() then  ent:AddLegDamageExt(dmginfo:GetInflictor().LegDamage / (curpen + 1), attacker, attacker:GetActiveWeapon(), SLOWTYPE_PULSE)  end   if IsFirstTimePredicted() then  util.CreatePulseImpactEffect(tr.HitPos, tr.HitNormal)  end end  function SWEP:EmitFireSound()  self:EmitSound("weapons/stunstick/alyx_stunner2.wav", 72, 115, 0.65, CHAN_AUTO)  self:EmitSound("weapons/gauss/fire1.wav", 72, 108, 0.75, 0.8, CHAN_WEAPON) end  function SWEP:SendWeaponAnimation()  self:SendWeaponAnim(ACT_VM_PRIMARYATTACK)  self:GetOwner():GetViewModel():SetPlaybackRate(self.FireAnimSpeed)   timer.Simple(0.20, function()  if IsValid(self) then  self:SendWeaponAnim(ACT_SHOTGUN_PUMP)  self:GetOwner():GetViewModel():SetPlaybackRate(self.FireAnimSpeed)   if CLIENT and self:GetOwner() == MySelf then  self:EmitSound("npc/sniper/reload1.wav", 75, 170, 0.6, CHAN_AUTO + 1)  end  end  end) end  function SWEP:PlayFireModeSwitchSound(fm)  fm = tonumber(fm)  if CLIENT then  if fm == 1 then  surface.PlaySound("npc/scanner/combat_scan3.wav")  else  surface.PlaySound("npc/scanner/combat_scan2.wav")  end  end end  function SWEP:FireModeChanged(fm)  fm = tonumber(fm)   local owner = self:GetOwner()   local currentclip = self:Clip1()  local ratio = currentclip / self.Primary.ClipSize   self.RequiredClip = fm == 1 and 3 or 1  self.Primary.ClipSize = fm == 1 and 21 or 7  self.Primary.ReloadAmount = fm == 1 and 3 or 1  if fm == 1 then  self.Primary.Delay = self.Primary.Delay * 0.75  else  self.Primary.Delay = self.Primary.Delay / 0.75  end   local ammotype = self:GetPrimaryAmmoType()  local newclip = math.floor(self.Primary.ClipSize * ratio)  local spare = owner:GetAmmoCount(ammotype)   newclip = math.min(self:GetCombinedPrimaryAmmo(), newclip)   local dif = currentclip - newclip   owner:SetAmmo(spare + dif, ammotype)  self:SetClip1(newclip) end 