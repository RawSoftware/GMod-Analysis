AddCSLuaFile() local BaseClass = baseclass.Get("weapon_zs_base")  SWEP.PrintName = "'Ricochete' Magnum" SWEP.Description = "This gun's bullets will bounce off of walls which will then deal extra damage." SWEP.Slot = 1 SWEP.SlotPos = 0  if CLIENT then  SWEP.ViewModelFlip = false  SWEP.ViewModelFOV = 60   SWEP.HUD3DBone = "Python"  SWEP.HUD3DPos = Vector(0.85, 0, -2.5)  SWEP.HUD3DScale = 0.015 end  SWEP.Base = "weapon_zs_base"  SWEP.HoldType = "revolver"  SWEP.ViewModel = "models/weapons/c_357.mdl" SWEP.WorldModel = "models/weapons/w_357.mdl" SWEP.UseHands = true  SWEP.CSMuzzleFlashes = false  SWEP.Primary.Sound = Sound("weapons/357/357_fire2.wav") SWEP.Primary.Delay = 0.66 SWEP.Primary.Damage = 59 SWEP.Primary.NumShots = 1  SWEP.Primary.ClipSize = 6 SWEP.Primary.Automatic = false SWEP.Primary.Ammo = "pistol" SWEP.Primary.Gesture = ACT_HL2MP_GESTURE_RANGE_ATTACK_PISTOL GAMEMODE:SetupDefaultClip(SWEP.Primary)  SWEP.Tier = 2  SWEP.ConeMax = 3.75 SWEP.ConeMin = 2 SWEP.BounceMulti = 1.5  SWEP.IronSightsPos = Vector(-4.65, 4, 0.25) SWEP.IronSightsAng = Vector(0, 0, 1)  SWEP.MaxStacks = 0  SWEP.OverkillFactor = 0.15  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MAX_SPREAD, -0.7, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MIN_SPREAD, -0.35, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_FIRE_DELAY, -0.07)  local branch = GAMEMODE:AddNewRemantleBranch(SWEP, 1, "'Backlash' Magnum", "More accurate per hit, faster firing, but less damage on non-bounced shots", function(wept)  wept.Primary.Damage = wept.Primary.Damage * 0.85  wept.Primary.Delay = wept.Primary.Delay * 0.85  wept.BounceMulti = 1.68  wept.GetCone = function(self)  return BaseClass.GetCone(self) * (1 - self:GetDTInt(9)/11)  end  wept.FinishReload = function(self)  self:SetDTInt(9, 0)  BaseClass.FinishReload(self)  end  function wept:Deploy()  self:SetDTInt(9, 0)  return BaseClass.Deploy(self)  end   local mat = Material("models/props_vents/borealis_vent001c")  wept.PreDrawViewModel = function(self, vm)  render.MaterialOverrideByIndex(0, mat)   BaseClass.PreDrawViewModel(self, vm)  end  wept.PostDrawViewModel = function(self, vm)  render.MaterialOverrideByIndex(0)   BaseClass.PostDrawViewModel(self, vm)  end end) branch.CollectiveName = "Backlash"  branch = GAMEMODE:AddNewRemantleBranch(SWEP, 2, "'Blue Orchid' Double-Barreled Magnum", "Uses two rounds, auto loads shot if both rounds hit, no ricochet, less damage, slightly more accurate. A 5 load combo grants upto 1 fervor stack.", function(wept)  wept.HoldType = "pistol"  wept.Primary.NumShots = 2  wept.RequiredClip = 2  wept.Primary.Damage = wept.Primary.Damage * 0.65  wept.ConeMin = wept.ConeMin * 0.85  wept.ConeMax = wept.ConeMax * 0.85   if CLIENT then  wept.ShowViewModel = false  wept.ShowWorldModel = false   wept.VElements = {  ["base+++++"] = { type = "Model", model = "models/hunter/blocks/cube05x4x05.mdl", bone = "Python", rel = "base", pos = Vector(-9.891, 0, 7.171), angle = Angle(0, 90, -159.258), size = Vector(0.027, 0.059, 0.028), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++++++++"] = { type = "Model", model = "models/props_c17/oildrum001.mdl", bone = "Python", rel = "base", pos = Vector(-1.52, -0.48, 5.725), angle = Angle(0, 180, -90), size = Vector(0.017, 0.017, 0.021), color = Color(145, 145, 145, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["base++++++++++++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x1c.mdl", bone = "Python", rel = "base", pos = Vector(-3.076, -0.44, 2.503), angle = Angle(60.925, 0, 90), size = Vector(0.085, 0.064, 0.017), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++++++++++"] = { type = "Model", model = "models/props_rooftop/sign_letter_u001b.mdl", bone = "Python", rel = "base", pos = Vector(-1.481, 0, 5.69), angle = Angle(-24.296, 0, 0), size = Vector(0.023, 0.052, 0.027), color = Color(145, 145, 145, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["bullet+++++"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet6", rel = "", pos = Vector(-0.225, -0.105, 0.99), angle = Angle(0, 60, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["base++++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x5.mdl", bone = "Python", rel = "base", pos = Vector(-4.861, 0, 4.38), angle = Angle(-110.957, 0, 180), size = Vector(0.024, 0.024, 0.048), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++++"] = { type = "Model", model = "models/props_c17/furniturearmchair001a.mdl", bone = "Python", rel = "base", pos = Vector(-1.25, -0.7, 2.545), angle = Angle(39.502, -180, 0), size = Vector(0.045, 0.021, 0.071), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["cylinder++++++"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(-0.801, -0.45, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["base"] = { type = "Model", model = "models/props_combine/breenlight.mdl", bone = "Python", rel = "", pos = Vector(0, 2.934, -4.283), angle = Angle(-68.961, 90, 0), size = Vector(0.469, 0.259, 0.287), color = Color(160, 120, 120, 255), surpresslightning = false, material = "phoenix_storms/fender_wood", skin = 0, bodygroup = {} },  ["bullet++"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet3", rel = "", pos = Vector(0.184, 0.096, 0.99), angle = Angle(0, -120, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["cylinder+++"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(0.769, 0.4, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["cylinder++++"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(-0.77, 0.4, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["bullet++++"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet5", rel = "", pos = Vector(-0.196, 0.094, 0.99), angle = Angle(0, 120, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["base+++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x5.mdl", bone = "Python", rel = "base", pos = Vector(-4.309, 0, 5.874), angle = Angle(-110.957, 0, 180), size = Vector(0.024, 0.024, 0.048), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["cylinder+++++"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(0.73, -0.461, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["cylinder+"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(0, -0.84, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/gibs/glass_shard03.mdl", bone = "Python", rel = "base", pos = Vector(-2.152, -0.475, 3), angle = Angle(-109.084, 0, 90), size = Vector(0.204, 0.481, 1.547), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["cylinder"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "", pos = Vector(0, 0, -1.303), angle = Angle(0, 0, 0), size = Vector(0.029, 0.029, 0.893), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_phx/misc/small_ramp.mdl", bone = "Python", rel = "base", pos = Vector(-0.928, 0, 3.519), angle = Angle(21.385, -180, 0), size = Vector(0.004, 0.003, 0.008), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["cylinder++"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "Cylinder", rel = "cylinder", pos = Vector(0, 0.839, 0.31), angle = Angle(180, 0, 0), size = Vector(0.008, 0.008, 0.041), color = Color(0, 0, 0, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["bullet+++"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet4", rel = "", pos = Vector(0, 0.189, 0.99), angle = Angle(0, 0, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["bullet+"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet2", rel = "", pos = Vector(0.15, -0.106, 0.99), angle = Angle(0, -60, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["base++++++"] = { type = "Model", model = "models/hunter/blocks/cube05x4x05.mdl", bone = "Python", rel = "base", pos = Vector(-8.061, 0, 8.027), angle = Angle(0, 90, -159.258), size = Vector(0.035, 0.075, 0.018), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++++++"] = { type = "Model", model = "models/props_c17/light_decklight01_on.mdl", bone = "Python", rel = "base", pos = Vector(-6.651, 0, 4.83), angle = Angle(69.303, 0, 90), size = Vector(0.143, 0.188, 0.104), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++"] = { type = "Model", model = "models/hunter/triangles/trapezium3x3x1c.mdl", bone = "Python", rel = "base", pos = Vector(-13.641, 0, 10.56), angle = Angle(20.242, 180, 0), size = Vector(0.02, 0.006, 0.017), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["bullet"] = { type = "Model", model = "models/props_wasteland/laundry_basket002.mdl", bone = "Bullet1", rel = "", pos = Vector(-0, -0.144, 0.99), angle = Angle(0, 0, 0), size = Vector(0.014, 0.014, 0.039), color = Color(117, 103, 0, 255), surpresslightning = false, material = "models/shiny", skin = 0, bodygroup = {} },  ["base++++++++++"] = { type = "Model", model = "models/props_phx/trains/monorail1.mdl", bone = "Python", rel = "base", pos = Vector(-4.782, -0.475, 3.312), angle = Angle(-20.328, 0, 90), size = Vector(0.008, 0.032, 0.032), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++++"] = { type = "Model", model = "models/props_c17/furniturearmchair001a.mdl", bone = "Python", rel = "base", pos = Vector(-3.004, -0.7, 3.203), angle = Angle(-162.056, -180, 0), size = Vector(0.025, 0.021, 0.046), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} }  }   wept.WElements = {  ["base+++++"] = { type = "Model", model = "models/hunter/blocks/cube05x4x05.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-9.891, 0, 7.171), angle = Angle(0, 90, -159.258), size = Vector(0.027, 0.059, 0.028), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++++++++"] = { type = "Model", model = "models/props_c17/oildrum001.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-1.52, -0.48, 5.725), angle = Angle(0, 180, -90), size = Vector(0.017, 0.017, 0.021), color = Color(145, 145, 145, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["base++++++++++++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x1c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-3.076, -0.44, 2.503), angle = Angle(60.925, 0, 90), size = Vector(0.085, 0.064, 0.017), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++++++++++"] = { type = "Model", model = "models/props_rooftop/sign_letter_u001b.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-1.481, 0, 5.69), angle = Angle(-24.296, 0, 0), size = Vector(0.023, 0.052, 0.027), color = Color(145, 145, 145, 255), surpresslightning = false, material = "metal2", skin = 0, bodygroup = {} },  ["base+++++++++"] = { type = "Model", model = "models/props_c17/furniturearmchair001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-3.004, -0.7, 3.203), angle = Angle(-162.056, -180, 0), size = Vector(0.025, 0.021, 0.046), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x5.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-4.861, 0, 4.38), angle = Angle(-110.957, 0, 180), size = Vector(0.024, 0.024, 0.048), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++++"] = { type = "Model", model = "models/props_c17/furniturearmchair001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-1.25, -0.7, 2.545), angle = Angle(39.502, -180, 0), size = Vector(0.045, 0.021, 0.071), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base"] = { type = "Model", model = "models/props_combine/breenlight.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.913, 1.044, -0.726), angle = Angle(-163.702, 0.173, 0), size = Vector(0.469, 0.259, 0.287), color = Color(160, 120, 120, 255), surpresslightning = false, material = "phoenix_storms/fender_wood", skin = 0, bodygroup = {} },  ["cylinder"] = { type = "Model", model = "models/props_phx/construct/metal_angle360.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-1.923, 0, 3.967), angle = Angle(69.563, 0, 0), size = Vector(0.029, 0.029, 0.893), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++"] = { type = "Model", model = "models/hunter/tubes/tube1x1x5.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-4.309, 0, 5.874), angle = Angle(-110.957, 0, 180), size = Vector(0.024, 0.024, 0.048), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++"] = { type = "Model", model = "models/gibs/glass_shard03.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-2.152, -0.475, 3), angle = Angle(-109.084, 0, 90), size = Vector(0.204, 0.481, 1.547), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+"] = { type = "Model", model = "models/props_phx/misc/small_ramp.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-0.928, 0, 3.519), angle = Angle(21.385, -180, 0), size = Vector(0.004, 0.003, 0.008), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++"] = { type = "Model", model = "models/hunter/blocks/cube05x4x05.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-8.061, 0, 8.027), angle = Angle(0, 90, -159.258), size = Vector(0.035, 0.075, 0.018), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++"] = { type = "Model", model = "models/hunter/triangles/trapezium3x3x1c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-13.641, 0, 10.56), angle = Angle(20.242, 180, 0), size = Vector(0.02, 0.006, 0.017), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base+++++++++++"] = { type = "Model", model = "models/props_c17/light_decklight01_on.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-6.651, 0, 4.83), angle = Angle(69.303, 0, 90), size = Vector(0.143, 0.188, 0.104), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} },  ["base++++++++++"] = { type = "Model", model = "models/props_phx/trains/monorail1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "base", pos = Vector(-4.782, -0.475, 3.312), angle = Angle(-20.328, 0, 90), size = Vector(0.008, 0.032, 0.032), color = Color(255, 255, 255, 255), surpresslightning = false, material = "metal2a", skin = 0, bodygroup = {} }  }   wept.ViewModelBoneMods = {  ["ValveBiped.Bip01_L_UpperArm"] = { scale = Vector(1, 1, 1), pos = Vector(0, 0, 0), angle = Angle(0.837, 129.358, 0) }  }   wept.PostDrawViewModel = function(self, vm)  BaseClass.PostDrawViewModel(self, vm)   local ang = self.ViewModelBoneMods["ValveBiped.Bip01_L_UpperArm"].angle  ang.pitch = math.Approach(ang.pitch, self:GetReloadFinish() ~= 0 and 0 or 0.837, FrameTime() * 250)  ang.yaw = math.Approach(ang.yaw, self:GetReloadFinish() ~= 0 and 0 or 129.358, FrameTime() * 250)  end  end   wept.IronSightsPos = Vector(-4.6, 0, 0.159)  wept.IronSightsAng = Vector(0, 0, 0)   wept.PrimaryAttack = function(self)  self:SetDTInt(9, 0)          local autos = self.AutoLoads  BaseClass.PrimaryAttack(self)         if autos == self.AutoLoads or self.AutoLoads == 5 then             if self.AutoLoads == 5 then                 self:GetOwner():GiveStack("buff_stack_fervor", 1 + self.MaxStacks)             end              self.AutoLoads = 0         end  end   wept.EmitFireSound = function(self)  self:EmitSound(")weapons/357/357_fire2.wav", 85, math.random(70, 75))  end   wept.BulletCallback = function(attacker, tr, dmginfo)  local ent = tr.Entity  if SERVER then  local wep = attacker:GetActiveWeapon()  if ent:IsValidLivingZombie() then  if wep:GetDTInt(9) >= 1 then     wep:SetDTInt(9, 0)   local max1 = wep:GetPrimaryClipSize()  local ammotype = wep:GetPrimaryAmmoType()  local spare = attacker:GetAmmoCount(ammotype)  local current = wep:Clip1()  local needed = math.min(2, max1 - current)   needed = math.min(spare, needed)   wep:SetClip1(current + needed)  if SERVER then  attacker:RemoveAmmo(needed, ammotype)  end                      wep.AutoLoads = (wep.AutoLoads or 0) + 1  else  wep:SetDTInt(9, wep:GetDTInt(9) + 1)  end  end  end  end end) branch.CollectiveName = "Blue Orchid" branch.NewNames = {"Smokin'!", "Smokin' Style!", "Smokin' Sick Style!"} branch.Colors = {Color(250, 135, 120), Color(200, 85, 70), Color(215, 55, 35), Color(255, 40, 0)} branch.Killicon = "weapon_zs_blueorchid" GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_FIRE_DELAY, -0.05) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_CLIP_SIZE, 2, 3) GAMEMODE:AttachWeaponModifierToBranch(branch, WEAPON_MODIFIER_MAX_STACKS, 1, 3)  function SWEP:EmitFireSound()  self:EmitSound(string.format("weapons/357/357_fire%d.wav", math.random(2,3)), 75, math.random(88, 93), 0.93, CHAN_WEAPON) end  local function DoRicochet(attacker, hitpos, hitnormal, normal, damage)  local RicoCallback = function(att, tr, dmginfo)  local ent = tr.Entity  local wep = att:GetActiveWeapon()  if wep.Branch == 1 and ent:IsValidZombie() then  wep:SetDTInt(9, wep:GetDTInt(9) + 2)  end  end   attacker.RicochetBullet = true  if attacker:IsValid() then         FORCE_B_EFFECT = true  attacker:FireBulletsLua(hitpos, 2 * hitnormal * hitnormal:Dot(normal * -1) + normal, 0, 1, damage, nil, nil, "tracer_rico", RicoCallback, nil, nil, nil, nil, attacker:GetActiveWeapon())         FORCE_B_EFFECT = nil  end  attacker.RicochetBullet = nil end function SWEP.BulletCallback(attacker, tr, dmginfo)  local ent = tr.Entity  if SERVER and tr.HitWorld and not tr.HitSky then  local hitpos, hitnormal, normal, dmg = tr.HitPos, tr.HitNormal, tr.Normal, dmginfo:GetDamage() * attacker:GetActiveWeapon().BounceMulti  timer.Simple(0, function() DoRicochet(attacker, hitpos, hitnormal, normal, dmg) end)  end   if SERVER then  local wep = attacker:GetActiveWeapon()  if wep.Branch == 1 and ent:IsValidZombie() then  wep:SetDTInt(9, wep:GetDTInt(9) + 1)  end  end end 