AddCSLuaFile() local BaseClass = baseclass.Get("weapon_zs_basemelee")  SWEP.PrintName = "'MjĂ¶lnir' Shock Hammer" SWEP.Description = "Discharges electricity on hit to nearby enemies, damaging and slowing them. Consumes pulse ammo."  if CLIENT then  SWEP.ViewModelFOV = 60  SWEP.ShowViewModel = false  SWEP.ShowWorldModel = false   SWEP.VElements = {  ["head+++"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(-0.851, -2.853, -8.436), angle = Angle(0, 180, 90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["handle"] = { type = "Model", model = "models/props_junk/meathook001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(5.447, 1.685, -4.921), angle = Angle(0.372, 84.087, -2.806), size = Vector(0.699, 0.699, 0.579), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(-0.851, -0.713, -8.436), angle = Angle(0, 180, -90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["tech+"] = { type = "Model", model = "models/props_lab/teleportring.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(2.371, -1.721, -9.101), angle = Angle(0, 0, 0), size = Vector(0.048, 0.129, 0.165), color = Color(0, 115, 255, 255), surpresslightning = false, material = "models/props_combine/masterinterface01c", skin = 0, bodygroup = {} },  ["tech"] = { type = "Model", model = "models/props_lab/teleportring.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(-2.372, -1.721, -7.731), angle = Angle(0, 180, -180), size = Vector(0.048, 0.129, 0.165), color = Color(0, 115, 255, 255), surpresslightning = false, material = "models/props_combine/masterinterface01c", skin = 0, bodygroup = {} },  ["head++++"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0.85, -2.853, -8.436), angle = Angle(-180, 180, 90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head++++++"] = { type = "Model", model = "models/props_lab/teleplatform.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0, 0.554, -4.315), angle = Angle(-180, -90, 0), size = Vector(0.057, 0.045, 0.082), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0, 5.718, -7.5), angle = Angle(-90, 0, -90), size = Vector(0.128, 0.057, 0.05), color = Color(175, 200, 255, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head+"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0.85, -0.713, -8.436), angle = Angle(-180, 180, -90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head+++++++"] = { type = "Model", model = "models/props_lab/teleplatform.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0, -4.11, -4.315), angle = Angle(-180, 90, 0), size = Vector(0.057, 0.045, 0.082), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head+++++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "handle", pos = Vector(0, -9.247, -7.5), angle = Angle(-90, 0, 90), size = Vector(0.128, 0.057, 0.05), color = Color(175, 200, 255, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} }  }   SWEP.WElements = {  ["head+++"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(-0.851, -2.853, -8.436), angle = Angle(0, 180, 90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["handle"] = { type = "Model", model = "models/props_junk/meathook001a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(4.965, 1.067, -4.003), angle = Angle(-1.89, 106.166, 5.711), size = Vector(0.699, 0.699, 0.579), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(-0.851, -0.713, -8.436), angle = Angle(0, 180, -90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head+++++++"] = { type = "Model", model = "models/props_lab/teleplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0, -4.11, -4.315), angle = Angle(-180, 90, 0), size = Vector(0.057, 0.045, 0.082), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0, 5.718, -7.5), angle = Angle(-90, 0, -90), size = Vector(0.128, 0.057, 0.05), color = Color(175, 200, 255, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head++++"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0.85, -2.853, -8.436), angle = Angle(-180, 180, 90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["head+"] = { type = "Model", model = "models/props_combine/combine_barricade_med02c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0.85, -0.713, -8.436), angle = Angle(-180, 180, -90), size = Vector(0.059, 0.065, 0.035), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["tech"] = { type = "Model", model = "models/props_lab/teleportring.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(-2.372, -1.721, -7.731), angle = Angle(0, 180, 180), size = Vector(0.048, 0.129, 0.165), color = Color(0, 115, 255, 255), surpresslightning = false, material = "models/props_combine/masterinterface01c", skin = 0, bodygroup = {} },  ["head++++++"] = { type = "Model", model = "models/props_lab/teleplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0, 0.554, -4.315), angle = Angle(-180, -90, 0), size = Vector(0.057, 0.045, 0.082), color = Color(165, 165, 165, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} },  ["tech+"] = { type = "Model", model = "models/props_lab/teleportring.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(2.371, -1.721, -9.101), angle = Angle(0, 0, 0), size = Vector(0.048, 0.129, 0.165), color = Color(0, 115, 255, 255), surpresslightning = false, material = "models/props_combine/masterinterface01c", skin = 0, bodygroup = {} },  ["head+++++"] = { type = "Model", model = "models/props_combine/combine_teleportplatform.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "handle", pos = Vector(0, -9.247, -7.5), angle = Angle(-90, 0, 90), size = Vector(0.128, 0.057, 0.05), color = Color(175, 200, 255, 255), surpresslightning = false, material = "models/props_combine/metal_combinebridge001", skin = 0, bodygroup = {} }  }      local colBG = Color(16, 16, 16, 90)  local colRed = Color(220, 0, 0, 230)  local colWhite = Color(220, 220, 220, 230)   function SWEP:DrawHUD()  local screenscale = BetterScreenScale()   local wid, hei = 180 * screenscale, 64 * screenscale  local x, y = ScrW() - wid - screenscale * 128, ScrH() - hei - screenscale * 72  local spare = self:GetPrimaryAmmoCount()   draw.RoundedBox(16, x, y, wid, hei, colBG)  draw.SimpleTextBlurry(spare, spare >= 1000 and "ZSHUDFont" or "ZSHUDFontBig", x + wid * 0.5, y + hei * 0.5, spare == 0 and colRed or colWhite, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)   BaseClass.DrawHUD(self)  end end  SWEP.Base = "weapon_zs_basemelee"  SWEP.HoldType = "melee"  SWEP.DamageType = DMG_CLUB  SWEP.ViewModel = "models/weapons/c_crowbar.mdl" SWEP.WorldModel = "models/weapons/w_crowbar.mdl" SWEP.UseHands = true  SWEP.MeleeDamage = 195 SWEP.LegDamage = 20 SWEP.MeleeRange = 62 SWEP.MeleeSize = 3 SWEP.MeleeKnockBack = 150  SWEP.Primary.Delay = 1.25  SWEP.Tier = 6 SWEP.MaxStock = 2  SWEP.WalkSpeed = SPEED_SLOW  SWEP.SwingRotation = Angle(60, 0, -80) SWEP.SwingOffset = Vector(0, -30, 0) SWEP.SwingTime = 0.75 SWEP.SwingHoldType = "grenade"  SWEP.BlockRotation = Angle(0, 20, -60) SWEP.BlockOffset = Vector(-5, 7, 10)  SWEP.Stability = 60 SWEP.BlockReduction = 0.5  SWEP.Primary.Ammo = "pulse" SWEP.Primary.ClipSize = 15 GAMEMODE:SetupDefaultClip(SWEP.Primary) SWEP.RequiredClip = 8  SWEP.PointsMultiplier = GAMEMODE.PulsePointsMultiplier  SWEP.AllowQualityWeapons = true  SWEP.StaminaUsage = 0.22  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MELEE_IMPACT_DELAY, -0.1, 1)  function SWEP:PlaySwingSound()  self:EmitSound("weapons/stunstick/stunstick_swing"..math.random(2)..".wav", 75, math.random(85, 95)) end  function SWEP:PlayHitSound()  self:EmitSound("physics/metal/metal_canister_impact_hard"..math.random(3)..".wav", 75, math.Rand(80, 85))  self:EmitSound("weapons/stunstick/stunstick_impact"..math.random(2)..".wav", 75, math.Rand(75, 80), nil, CHAN_AUTO) end  function SWEP:PlayHitFleshSound()  self:EmitSound("physics/body/body_medium_break"..math.random(2, 4)..".wav", 75, math.Rand(86, 90), nil, CHAN_AUTO) end  function SWEP:BashEffect(tr, ent)  if SERVER then  ent:AddLegDamageExt(self.LegDamage, self:GetOwner(), self, SLOWTYPE_PULSE)  end end  function SWEP:HasEnergy()  return self:GetCombinedPrimaryAmmo() >= self.RequiredClip end  function SWEP:OnMeleeHit(hitent, hitflesh, tr)  if hitent:IsValidLivingZombie() then         if not self:HasEnergy() then return end         self:TakePrimaryAmmo(self.RequiredClip)   local heavy = self:IsHeavy()  hitent:AddLegDamageExt(self.LegDamage * (heavy and 1 or 0.7), self:GetOwner(), self, SLOWTYPE_PULSE)   local hitpos = tr.HitPos   local owner = self:GetOwner()  if owner:IsValidHuman() then  local source = self   local shocked = {}  local prevtarget = hitent  if prevtarget:IsValidLivingZombie() and not prevtarget:GetZombieClassTable().NeverAlive or prevtarget.ZombieConstruction then  prevtarget:EmitSound("ambient/energy/zap1.wav", 70, 240, 0.7, CHAN_AUTO)   shocked[prevtarget] = true  end   for i = 1, (heavy and 10 or 5) do  local pos = prevtarget:IsValidLivingZombie() and prevtarget:WorldSpaceCenter() or self:GetPos()   for k, ent in pairs(ents.FindInSphere(pos, 75)) do  if not shocked[ent] and ent:IsValidLivingZombie() and not ent:GetZombieClassTable().NeverAlive and WorldVisible(pos, ent:NearestPoint(pos)) then  shocked[ent] = true  prevtarget = ent   local pointmul = self.PointsMultiplier  local dmg = self.MeleeDamage * (heavy and 0.37 or 0.4)   timer.Simple(i * 0.1, function()  if not ent:IsValid() or not ent:IsValidLivingZombie() or not WorldVisible(pos, ent:NearestPoint(pos)) then return end   local worldspace = ent:WorldSpaceCenter()  if pointmul then  POINTSMULTIPLIER = self.PointsMultiplier  end  ent:TakeSpecialDamage(dmg / (1 + i * 0.25), DMG_SHOCK, owner, source, worldspace)  ent:AddLegDamageExt((heavy and 4.35 or 6) / (1 + i * 0.25), owner, source, SLOWTYPE_PULSE)  if pointmul then  POINTSMULTIPLIER = nil  end  ent:EmitSound("ambient/energy/zap3.wav", 70, 160, 0.9, CHAN_AUTO)   local effectdata = EffectData()  effectdata:SetOrigin(worldspace)  effectdata:SetStart(pos)  effectdata:SetEntity(prevtarget)  util.Effect("tracer_zapper", effectdata)  end)   break  end  end  end  end   local effectdata = EffectData()  effectdata:SetOrigin(hitpos)  effectdata:SetNormal(Vector(0, 0, 1))  util.Effect("hit_zeus", effectdata)  end end 