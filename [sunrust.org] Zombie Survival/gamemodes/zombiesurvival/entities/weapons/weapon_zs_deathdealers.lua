AddCSLuaFile()  SWEP.PrintName = "'Deathdealers' Dual Shotguns" SWEP.Description = "Dual shotguns that build up reaper stacks. Full stacks will cause you to take damage when you shoot. Pressing right click at max stacks uses them up to fire a heavy projectile."  SWEP.Slot = 3 SWEP.SlotPos = 0  if CLIENT then  SWEP.ViewModelFlip = false  SWEP.ViewModelFOV = 62  SWEP.ShowViewModel = false  SWEP.ShowWorldModel = false   SWEP.HUD3DBone = "v_weapon.slide_right"  SWEP.HUD3DPos = Vector(0, -3, -3.5)  SWEP.HUD3DScale = 0.015   SWEP.VElements = {  ["handle+"] = { type = "Model", model = "models/weapons/w_pist_elite_single.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel++", pos = Vector(-0.308, 20.618, -2.906), angle = Angle(-60.416, 89, 0), size = Vector(0.685, 1.394, 1.488), color = Color(105, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["handle"] = { type = "Model", model = "models/weapons/w_pist_elite_single.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel", pos = Vector(-0.308, 20.618, -2.906), angle = Angle(-60.416, 89, 0), size = Vector(0.685, 1.394, 1.488), color = Color(105, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["barrel+"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "v_weapon.elite_right", rel = "barrel", pos = Vector(0, 11.961, 0), angle = Angle(0, 0, 0), size = Vector(0.035, 0.004, 0.029), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["barrel+++"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "v_weapon.elite_right", rel = "barrel++", pos = Vector(0, 11.961, 0), angle = Angle(0, 0, 0), size = Vector(0.035, 0.004, 0.029), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["bottom2"] = { type = "Model", model = "models/props_wasteland/laundry_washer003.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel", pos = Vector(0, -5.393, -3.069), angle = Angle(180, 90, 0), size = Vector(0.143, 0.07, 0.057), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["barrel"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "v_weapon.elite_right", rel = "", pos = Vector(0.028, -2.34, 17.02), angle = Angle(180, 0, -90), size = Vector(0.034, 0.045, 0.029), color = Color(165, 165, 155, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["BARREL2+"] = { type = "Model", model = "models/props_combine/combinebutton.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel++", pos = Vector(-0.138, -14.155, -0.889), angle = Angle(180, -90, -90), size = Vector(0.352, 0.356, 0.18), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["bottom2+"] = { type = "Model", model = "models/props_wasteland/laundry_washer003.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel++", pos = Vector(0, -5.393, -3.069), angle = Angle(180, 90, 0), size = Vector(0.143, 0.07, 0.057), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["barrel++"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "v_weapon.elite_left", rel = "", pos = Vector(-0.213, -2.34, 17.02), angle = Angle(180, 0, -90), size = Vector(0.034, 0.045, 0.029), color = Color(165, 165, 155, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["BARREL2"] = { type = "Model", model = "models/props_combine/combinebutton.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "barrel", pos = Vector(-0.138, -14.155, -0.889), angle = Angle(180, -90, -90), size = Vector(0.352, 0.356, 0.18), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} }  }   SWEP.WElements = {  ["barrel"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(20.041, 2.372, -5.764), angle = Angle(180, -95, 16), size = Vector(0.034, 0.045, 0.029), color = Color(165, 165, 155, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["handle"] = { type = "Model", model = "models/weapons/w_pist_elite_single.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "barrel", pos = Vector(-0.308, 20.618, -2.906), angle = Angle(-60.416, 89, 0), size = Vector(0.685, 1.394, 1.488), color = Color(105, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["barrel+"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "barrel", pos = Vector(0, 11.961, 0), angle = Angle(0, 0, 0), size = Vector(0.035, 0.004, 0.029), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["BARREL2"] = { type = "Model", model = "models/props_combine/combinebutton.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "barrel", pos = Vector(-0.138, -14.155, -0.889), angle = Angle(180, -90, -90), size = Vector(0.352, 0.356, 0.18), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["bottom2"] = { type = "Model", model = "models/props_wasteland/laundry_washer003.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "barrel", pos = Vector(0, -5.393, -3.069), angle = Angle(180, 90, 0), size = Vector(0.143, 0.07, 0.057), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },      ["fixleft"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "", pos = Vector(21.978, 22.829, 2.127), angle = Angle(0, -95, 8), size = Vector(0.001, 0.001, 0.001), color = Color(165, 165, 155, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["barrel++"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "fixleft", pos = Vector(-19.978, 2.829, 4.127), angle = Angle(0, 0, 8), size = Vector(0.034, 0.045, 0.029), color = Color(165, 165, 155, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["handle+"] = { type = "Model", model = "models/weapons/w_pist_elite_single.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "barrel++", pos = Vector(-0.308, 20.618, -2.906), angle = Angle(-60.416, 89, 0), size = Vector(0.685, 1.394, 1.488), color = Color(105, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["barrel+++"] = { type = "Model", model = "models/props_combine/combine_train02a.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "barrel++", pos = Vector(0, 11.961, 0), angle = Angle(0, 0, 0), size = Vector(0.035, 0.004, 0.029), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["BARREL2+"] = { type = "Model", model = "models/props_combine/combinebutton.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "barrel++", pos = Vector(-0.138, -14.155, -0.889), angle = Angle(180, -90, -90), size = Vector(0.352, 0.356, 0.18), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["bottom2+"] = { type = "Model", model = "models/props_wasteland/laundry_washer003.mdl", bone = "ValveBiped.Bip01_L_Hand", rel = "barrel++", pos = Vector(0, -5.393, -3.069), angle = Angle(180, 90, 0), size = Vector(0.143, 0.07, 0.057), color = Color(105, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} }  }   SWEP.ViewModelBoneMods = {  ["v_weapon.elite_right"] = { scale = Vector(1, 1, 1), pos = Vector(0, -0.19, -4.318), angle = Angle(0, 0, -3) },  ["ValveBiped.Bip01_Spine4"] = { scale = Vector(1, 1, 1), pos = Vector(0, 0, 0), angle = Angle(0, 4.721, 0) },  ["ValveBiped.Bip01_L_Hand"] = { scale = Vector(1, 1, 1), pos = Vector(0, 0, 0), angle = Angle(7, 0, 0) },  ["v_weapon.elite_left"] = { scale = Vector(1, 1, 1), pos = Vector(0, 0.126, -3.794), angle = Angle(0, 0, -3) },  ["ValveBiped.Bip01_R_Hand"] = { scale = Vector(1, 1, 1), pos = Vector(0, 0, 0), angle = Angle(-7, 0, 0) }  } end  SWEP.Base = "weapon_zs_base"  SWEP.HoldType = "duel"  SWEP.ViewModel = "models/weapons/cstrike/c_pist_elite.mdl" SWEP.WorldModel = "models/weapons/w_pist_elite.mdl" SWEP.FakeWorldModel = "models/weapons/w_shotgun.mdl" SWEP.UseHands = true  SWEP.Primary.Damage = 15 SWEP.Primary.NumShots = 8 SWEP.Primary.Delay = 0.4  SWEP.Primary.ClipSize = 8 SWEP.Primary.Automatic = true SWEP.Primary.Ammo = "buckshot" GAMEMODE:SetupDefaultClip(SWEP.Primary)  SWEP.ConeMax = 6.5 SWEP.ConeMin = 5.75  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MAX_SPREAD, -0.55, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_MIN_SPREAD, -0.4, 1)  SWEP.Tier = 6 SWEP.MaxStock = 2  SWEP.FireAnimSpeed = 1.65 SWEP.ReloadSpeed = 0.7  SWEP.WeaponBuildup = {  Colour = {150, 0, 150, 255},  Name = "Stacks" }  function SWEP:OnZombieKilled()  local killer = self:GetOwner()   if killer:IsValid() then  killer:GiveStack("buff_stack_reaper")  end end  function SWEP:GetWeaponBuildup()  local killer = self:GetOwner()   if killer:IsValid() then  local reaperstatus = killer:GetStatus("buff_stack_reaper")   if IsValid(reaperstatus) then  return reaperstatus:GetDTInt(1)/3  end  end   return 0 end  function SWEP:SendReloadAnimation()  self:SendWeaponAnim(ACT_VM_DRAW) end  function SWEP:TakeAmmo(sec)     self:TakePrimaryAmmo(self.RequiredClip * (sec and 2 or 1))      if SERVER and not sec and self:GetWeaponBuildup() >= 1 then         local owner = self:GetOwner()         owner:TakeSpecialDamage(0.49, DMG_GENERIC, owner, self)     end end  function SWEP:SecondaryAttack()  if not self:CanPrimaryAttack() then return end   self:SetNextPrimaryFire(CurTime() + self:GetFireDelay() * (self:Clip1() == 2 and 5 or 1))   if self:GetWeaponBuildup() >= 1 then  local owner = self:GetOwner()   self:EmitFireSound()  self:SendWeaponAnimation()  self:TakeAmmo(true)  owner:DoAttackEvent()  owner:ViewPunch(Angle(3, 0, 3))   if SERVER then  self:ShootProjectile(self.Primary.Damage * 8 * 1.75, 0, "projectile_deathdealers", 200)  owner:RemoveStatus("buff_stack_reaper")  end  end end  function SWEP:Reload()  local owner = self:GetOwner()  if owner:IsHolding() or not self:CanReload() then return end   if SERVER then  for i=1,2 do  local ent = ents.Create("prop_fakeweapon")  if ent:IsValid() then  ent:SetOwner(owner)  ent:SetWeaponType(self:GetClass())  local pos = owner:EyePos() + owner:EyeAngles():Right() * (i == 1 and 8 or -8)  ent:SetPos(pos)  ent:SetAngles(VectorRand():Angle())  ent:Spawn()  local phys = ent:GetPhysicsObject()  if phys:IsValid() then  phys:AddAngleVelocity(Vector(math.Rand(-420, 420), math.Rand(-420, 420), math.Rand(-420, 420)))  phys:ApplyForceCenter(phys:GetMass() * owner:GetAimVector() * math.random(64, 128))  end  end  end  end   self.BaseClass.Reload(self) end  function SWEP:SendWeaponAnimation()  self:SendWeaponAnim(self:Clip1() % 2 == 0 and ACT_VM_PRIMARYATTACK or ACT_VM_SECONDARYATTACK)  self:GetOwner():GetViewModel():SetPlaybackRate(self.FireAnimSpeed) end  function SWEP:EmitFireSound()  self:EmitSound("weapons/shotgun/shotgun_dbl_fire.wav", 75, math.random(125, 130), 0.3)  self:EmitSound("weapons/zs_dds/zs_dd.ogg", 75, math.random(115, 120), 1, CHAN_WEAPON + 1) end  if not CLIENT then return end  function SWEP:GetTracerOrigin()  local owner = self:GetOwner()  if owner:IsValid() then  local vm = owner:GetViewModel()  if vm and vm:IsValid() then  local attachment = vm:GetAttachment(self:Clip1() % 2 + 3)  if attachment then  return attachment.Pos  end  end  end end 