SWEP.PrintName = "'Virulence' Chemical Rifle" SWEP.Description = "Fires both fast projectiles and hitscan chemical shots in an inaccurate spread."  SWEP.Base = "weapon_zs_baseproj" local BaseClass = baseclass.Get("weapon_zs_baseproj")  SWEP.HoldType = "shotgun"  SWEP.ViewModel = "models/weapons/cstrike/c_shot_xm1014.mdl" SWEP.WorldModel = "models/weapons/w_shot_xm1014.mdl"  SWEP.UseHands = true  SWEP.CSMuzzleFlashes = false  SWEP.Primary.ClipSize = 18 SWEP.Primary.Automatic = true SWEP.Primary.Ammo = "chemical" SWEP.Primary.Delay = 0.85 SWEP.Primary.DefaultClip = 18 SWEP.Primary.Damage = 34 SWEP.RequiredClip = 3 SWEP.Primary.NumShots = 2  SWEP.ConeMax = 5.1 SWEP.ConeMin = 4.5  SWEP.WalkSpeed = SPEED_SLOW  SWEP.Tier = 2  SWEP.FireAnimSpeed = 0.3 SWEP.TracerName = "tracer_chem"  SWEP.ReloadDelay = 3.0  GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_FIRE_DELAY, -0.05, 1) GAMEMODE:AttachWeaponModifier(SWEP, WEAPON_MODIFIER_RELOAD_SPEED, 0.07, 1) GAMEMODE:AddNewRemantleBranch(SWEP, 1, "'Hemophage' Chemical Rifle", "Leeches blood armor to deal extra damage, can leech health to deal less, fires only 2 shots but more accurately. Leeching enough grants reaper stacks.", function(wept)  wept.ShootBullets = function(self, dmg, numbul, cone)  local owner = self:GetOwner()  if SERVER then  local consume_blood = math.min(2, owner:GetBloodArmor())  local consume_health = math.min(2 - consume_blood, owner:Health() - 1)   owner:SetBloodArmor(owner:GetBloodArmor() - consume_blood)  owner:SetHealth(owner:Health() - consume_health)   dmg = dmg + dmg * (consume_blood >= 2 and 1.25 or 0.8)   owner.HemophageConsumption = (owner.HemophageConsumption or 0) + consume_blood + consume_health   if owner.HemophageConsumption >= 30 then  owner.HemophageConsumption = 0  owner:GiveStack("buff_stack_reaper")  end  end   DO_BULLET_LAG_COMP = true  owner:FireBulletsLua(owner:GetShootPos(), owner:GetAimVector(), cone, numbul, dmg/1.35, nil, self.Primary.KnockbackScale, self.TracerName, self.BulletCallback, self.Primary.HullSize, nil, self.Primary.MaxDistance, nil, self)  DO_BULLET_LAG_COMP = nil   BaseClass.ShootBullets(self, dmg, numbul, cone)  end   wept.Primary.Damage = wept.Primary.Damage * 1.2  wept.Primary.NumShots = 1  wept.ConeMax = 2.1  wept.ConeMin = 1.95   wept.VElements = {  ["ooze"] = { type = "Model", model = "models/props_phx/construct/windows/window_curve360x1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "front", pos = Vector(0, 0, 1.366), angle = Angle(0, 0, 0), size = Vector(0.029, 0.035, 0.275), color = Color(125, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["back"] = { type = "Model", model = "models/weapons/w_shot_m3super90.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "front", pos = Vector(0.094, 7.573, 13.996), angle = Angle(-90, 90, 0), size = Vector(0.953, 1.585, 1.05), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["bottom1"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "front", pos = Vector(0, 0.712, 1.422), angle = Angle(0, 0, 0), size = Vector(0.029, 0.007, 0.273), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["ooze2"] = { type = "Model", model = "models/XQM/cylinderx1.mdl", bone = "ValveBiped.Bip01_Spine4", rel = "front", pos = Vector(0, 0, 7.666), angle = Angle(90, 0, 0), size = Vector(1.075, 0.259, 0.224), color = Color(255, 105, 105, 255), surpresslightning = true, material = "models/flesh", skin = 0, bodygroup = {} },  ["front"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "v_weapon.xm1014_Parent", rel = "", pos = Vector(0, -4.744, -22.335), angle = Angle(0, 0, 0), size = Vector(0.029, 0.012, 0.029), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["front+"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "v_weapon.xm1014_Parent", rel = "front", pos = Vector(0, 0, 9.824), angle = Angle(0, 0, 0), size = Vector(0.03, 0.012, 0.035), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["front++"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "v_weapon.xm1014_Parent", rel = "front", pos = Vector(0, 0, 14.423), angle = Angle(0, 0, 0), size = Vector(0.029, 0.012, 0.014), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} }  }   wept.WElements = {  ["ooze"] = { type = "Model", model = "models/props_phx/construct/windows/window_curve360x1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0, 0, 1.366), angle = Angle(0, 0, 0), size = Vector(0.029, 0.035, 0.275), color = Color(125, 105, 105, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },  ["bottom1"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0, 0.712, 1.422), angle = Angle(0, 0, 0), size = Vector(0.029, 0.007, 0.273), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["front+"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0, 0, 9.824), angle = Angle(0, 0, 0), size = Vector(0.03, 0.012, 0.035), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["ooze2"] = { type = "Model", model = "models/XQM/cylinderx1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0, 0, 7.666), angle = Angle(90, 0, 0), size = Vector(1.075, 0.259, 0.224), color = Color(255, 105, 105, 255), surpresslightning = true, material = "models/flesh", skin = 0, bodygroup = {} },  ["front"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(25.832, 0.82, -7.791), angle = Angle(0, 90, -79.082), size = Vector(0.029, 0.012, 0.029), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["back"] = { type = "Model", model = "models/weapons/w_shot_m3super90.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0.094, 7.573, 14.157), angle = Angle(-90, 90, 0), size = Vector(0.953, 1.585, 1.05), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} },  ["front++"] = { type = "Model", model = "models/hunter/misc/roundthing1.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "front", pos = Vector(0, 0, 14.423), angle = Angle(0, 0, 0), size = Vector(0.029, 0.012, 0.014), color = Color(125, 105, 105, 255), surpresslightning = false, material = "models/props_pipes/destroyedpipes01a", skin = 0, bodygroup = {} }  } end).CollectiveName = "Hemophage"  function SWEP:EmitFireSound()  self:EmitSound("weapons/shotgun/shotgun_fire6.wav", 75, math.random(162, 166), 0.6, CHAN_AUTO + 1)  self:EmitSound("npc/barnacle/barnacle_gulp2.wav", 70, 60, 0.9, CHAN_AUTO + 20) end  function SWEP.BulletCallback(attacker, tr, dmginfo)  local ent = tr.Entity  if SERVER and ent:IsValidLivingZombie() and math.random(13) == 1 then  local status = ent:GiveStatus("dot_corrosion")  status:AddDamage(8 * (attacker.AcidDamageMul or 1))  status.Applier = attacker  end end  function SWEP:ShootBullets(dmg, numbul, cone)  local owner = self:GetOwner()   DO_BULLET_LAG_COMP = true  owner:FireBulletsLua(owner:GetShootPos(), owner:GetAimVector(), cone, numbul, dmg/1.35, nil, self.Primary.KnockbackScale, self.TracerName, self.BulletCallback, self.Primary.HullSize, nil, self.Primary.MaxDistance, nil, self)  DO_BULLET_LAG_COMP = nil   BaseClass.ShootBullets(self, dmg, numbul, cone) end  function SWEP:SendReloadAnimation() end  function SWEP:ProcessReloadEndTime()  local reloadspeed = self.ReloadSpeed * self:GetReloadSpeedMultiplier()  self:SetReloadFinish(CurTime() + self.ReloadDelay / reloadspeed) end  function SWEP:EmitReloadSound()  if IsFirstTimePredicted() then  self:EmitSound("weapons/ar2/ar2_reload.wav", 70, math.random(78, 82), 0.65, CHAN_WEAPON + 21)  timer.Simple(0.8, function() if self:IsValid() then self:EmitSound("npc/barnacle/barnacle_gulp2.wav", 70, 60) end end)  end end  function SWEP:EmitReloadFinishSound()  if IsFirstTimePredicted() then  self:EmitSound("weapons/zs_sawnoff/barreldown.ogg", 70, math.random(58, 62), 0.65, CHAN_WEAPON + 21)  end end