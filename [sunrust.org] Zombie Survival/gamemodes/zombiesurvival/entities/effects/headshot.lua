local up_vec = Vector(0, 0, 12)  function EFFECT:Init(data)  local pos = data:GetOrigin()  local norm = data:GetNormal()  local mag = data:GetMagnitude()  local ent = data:GetEntity()      if ent:IsPlayer() then  ent:Dismember(DISMEMBER_HEAD)          if mag > 100 then             local pos2 = pos + up_vec             local rag = ent:GetRagdollEntity()             if rag:IsValid() and not rag.Frozen then                 local phys = rag:GetPhysicsObject()                 if phys:IsValid() then                     local physpos = phys:GetPos()                     for i=0, rag:GetPhysicsObjectCount() do                         local subphys = rag:GetPhysicsObjectNum(i)                         if subphys then                             subphys:Wake()                         end                     end                      phys:ApplyForceOffset(45000 * (physpos - pos):GetNormal(), pos2)                 end             end         end  end   sound.Play("physics/flesh/flesh_bloody_break.wav", pos, 77, math.Rand(130, 140))  sound.Play("physics/body/body_medium_break"..math.random(2, 4)..".wav", pos, 77, math.Rand(90, 110))   local grav = Vector(0, 0, -600)   local emitter = ParticleEmitter(pos)  for i=1, 6 do  local particle = emitter:Add("!sprite_bloodspray"..math.random(8), pos)  particle:SetVelocity(norm * 100 + VectorRand() * 36)  particle:SetDieTime(math.Rand(0.8, 0.9))  particle:SetGravity(grav)  particle:SetStartAlpha(200)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(7, 9))  particle:SetEndSize(math.Rand(5, 12))  particle:SetRoll(180)  particle:SetDieTime(3)  particle:SetColor(95, 30, 30)  end  local particle = emitter:Add("!sprite_bloodspray"..math.random(8), pos)  particle:SetVelocity(norm * 32)  particle:SetDieTime(math.Rand(0.34, 0.44))  particle:SetStartAlpha(200)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(14, 15))  particle:SetEndSize(math.Rand(33, 36))  particle:SetRoll(180)  particle:SetColor(95, 30, 30)  emitter:Finish() emitter = nil collectgarbage("step", 64)   util.Blood(pos, math.random(8, 10), Vector(0, 0, 1), 128)   local maxbound = Vector(3, 3, 3)  local minbound = maxbound * -1      local amount = math.floor(math.random(3, 4) / (player.GetCount() > 35 and 3 or 1))   for i=1, amount do  local dir = (norm * 2 + VectorRand()) / 3  dir:Normalize()   ent = ClientsideModel("models/props_junk/Rock001a.mdl", RENDERGROUP_OPAQUE)  if ent:IsValid() then  ent:SetMaterial("models/flesh")  ent:SetModelScale(math.Rand(0.1, 0.2), 0)  ent:SetPos(pos + dir * 6)  ent:PhysicsInitBox(minbound, maxbound)  ent:SetCollisionBounds(minbound, maxbound)   local phys = ent:GetPhysicsObject()  if phys:IsValid() then  phys:SetMaterial("zombieflesh")  phys:SetVelocityInstantaneous(dir * math.Rand(50, 300))  phys:AddAngleVelocity(VectorRand() * 3000)  end   SafeRemoveEntityDelayed(ent, math.Rand(6, 10))  end  end end  function EFFECT:Think()  return false end  function EFFECT:Render() end 