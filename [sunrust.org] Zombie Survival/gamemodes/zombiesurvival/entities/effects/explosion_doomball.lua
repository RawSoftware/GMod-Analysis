function EFFECT:Init(data)  local pos = data:GetOrigin()  self.Pos = pos  local normal = data:GetNormal()   self.Alpha = 255  self.Life = 0   local pos = data:GetOrigin()  local normal = data:GetNormal() * -1      self.Lines = {}     for i = 1, 8 do         local rand_up = (normal + VectorRand()):GetNormalized()          self.Lines[i] = {VectorRand() * 5, rand_up}     end   pos = pos + normal   sound.Play("ambient/fire/gascan_ignite1.wav", pos, 75, math.Rand(50, 55))   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)   for i=1, 6 do  local particle = emitter:Add("particles/smokey", pos)  particle:SetDieTime(math.Rand(2, 4.5))  particle:SetStartAlpha(50)  particle:SetEndAlpha(0)  particle:SetStartSize(100)  particle:SetEndSize(0)  particle:SetRollDelta(math.Rand(-5.5, 5.5))  particle:SetRoll(math.Rand(0, 360))  particle:SetColor(0, 0, 0)  end   for i=1, 15 do  local heading = VectorRand()  heading:Normalize()   local size = math.Rand(15, 25)   local particle = emitter:Add("particles/smokey", pos + heading * math.Rand(2, 64))  particle:SetVelocity(heading * math.Rand(155, 256))  particle:SetDieTime(math.Rand(1, 1.5))  particle:SetStartAlpha(60)  particle:SetEndAlpha(0)  particle:SetStartSize(size)  particle:SetEndSize(size)  particle:SetRollDelta(math.Rand(-1.5, 1.5))  particle:SetRoll(math.Rand(0, 360))  particle:SetColor(0, 0, 0)  particle:SetAirResistance(math.Rand(160, 200))  end   emitter:Finish() emitter = nil collectgarbage("step", 64) end  function EFFECT:Think()  self.Life = self.Life + FrameTime() * 2  self.Alpha = 255 * (1 - self.Life)  return self.Life < 1 end  local glowmat = Material("sprites/glow04_noz") local matTrail = Material("trails/smoke") function EFFECT:Render()  local pos = self.Pos   for i=1, 8 do  local line_start = self.Lines[i][1]  local line_end = self.Lines[i][2]          local end_vec = pos + line_end * ((60 * self.Alpha/255) + 30)       render.SetMaterial(matTrail)  render.DrawBeam(pos + line_start, end_vec, 5, i, 3 + i, Color(30, 20, 30, self.Alpha))          render.SetMaterial(glowmat)      render.DrawSprite(end_vec, 20, 20, Color(40, 20, 40, self.Alpha))          self.Lines[i][2] = Lerp(FrameTime() * 3, self.Lines[i][2], self.Lines[i][2] + VectorRand() * FrameTime() * 120)  end end