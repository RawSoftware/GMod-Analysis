function EFFECT:Init(effectdata)  local pos = effectdata:GetOrigin()  self.Pos = pos  self.Magnitude = effectdata:GetMagnitude()  self.Alpha = 255  self.Life = 0   if self.Magnitude > 6 then  sound.Play("ambient/office/zap1.wav", pos, 80, math.random(175, 180), 0.75)  end   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(24, 32)  emitter:Finish() emitter = nil collectgarbage("step", 64) end  function EFFECT:Think()  self.Life = self.Life + FrameTime() * 12  self.Alpha = 255 * (1 - self.Life)  return self.Life < 1 end  local glowmat = Material("sprites/glow04_noz") function EFFECT:Render()  local pos = self.Pos  local size = self.Magnitude/24   local sprsize = 20 + 80 * size + 30 * (1 - (self.Alpha/255))   render.SetMaterial(glowmat)  render.DrawSprite(pos, sprsize, sprsize, Color(120 * size, 140, 255, self.Alpha * 100)) end 