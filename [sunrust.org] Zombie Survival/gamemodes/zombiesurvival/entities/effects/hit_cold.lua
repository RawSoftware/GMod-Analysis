function EFFECT:Init(effectdata)  local pos = effectdata:GetOrigin()  self.Pos = pos  self.Magnitude = effectdata:GetMagnitude()  self.Alpha = 255  self.Life = 0   sound.Play("physics/glass/glass_impact_bullet1.wav", pos, 70, math.random(185, 190) - self.Magnitude * 5, 0.75)   local emitter = ParticleEmitter(pos)  emitter:SetNearClip(28, 32)  local grav = Vector(0, 0, -200)  for i=1, 10 do  local particle = emitter:Add("particle/sparkles", pos)  particle:SetVelocity(grav * -0.3 + VectorRand() * 50)  particle:SetDieTime(math.Rand(0.3, 0.5))  particle:SetStartAlpha(150)  particle:SetEndAlpha(0)  particle:SetStartSize(math.Rand(2, 3))  particle:SetEndSize(0)  particle:SetRoll(math.Rand(0, 360))  particle:SetRollDelta(math.Rand(-1, 1))  particle:SetGravity(grav)  particle:SetColor(140, 175, 205)  particle:SetLighting(false)  end  emitter:Finish() emitter = nil collectgarbage("step", 64)  end  function EFFECT:Think()  self.Life = self.Life + FrameTime() * 5  self.Alpha = 255 * (1 - self.Life)  return self.Life < 1 end  local glowmat = Material("particle/smokestack") function EFFECT:Render()  local pos = self.Pos  local size = self.Magnitude/24   local sprsize = 20 + 35 * size + 35 * (1 - (self.Alpha/255))   render.SetMaterial(glowmat)  render.DrawSprite(pos, sprsize, sprsize, Color(140, 175, 205, self.Alpha * 1)) end 