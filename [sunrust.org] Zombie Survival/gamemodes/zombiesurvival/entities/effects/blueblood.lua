EFFECT.LifeTime = 2  local blueblood = Material("zombiesurvival/blueblood") local blueblood2 = Material("zombiesurvival/blueblood2") local function CollideCallback(oldparticle, hitpos, hitnormal)  if oldparticle:GetDieTime() == 0 then return end  oldparticle:SetDieTime(0)   local pos = hitpos + hitnormal   util.DecalEx(math.random(2) == 1 and blueblood or blueblood2, game.GetWorld(), pos, hitpos - hitnormal, Color(255, 255, 255), math.Rand(1, 2),  math.Rand(1, 2)) end  function EFFECT:Init(data)  local pos = data:GetOrigin()  local angles = data:GetAngles()   self.Offset = data:GetStart()  self.Ent = data:GetEntity()   if self.Ent:IsValid() then  local offset = self.Ent:LocalToWorld(self.Offset)   local emitter = ParticleEmitter(offset)  emitter:SetNearClip(24, 32)   for i=1, 2 do  local particle = emitter:Add(i == 1 and "zombiesurvival/blueblood" or "zombiesurvival/blueblood2", pos + VectorRand() * 20)  particle:SetDieTime(1)  particle:SetColor(255,255,255)  particle:SetStartAlpha(255)  particle:SetEndAlpha(0)  particle:SetStartSize(math.random(10, 30))  particle:SetEndSize(0)  particle:SetVelocity((angles:Up()):GetNormal() * 30)  particle:SetGravity(VectorRand() * 20 + Vector(0, 0, -600))  particle:SetAirResistance(12)  particle:SetCollide(true)  particle:SetCollideCallback(CollideCallback)  end  emitter:Finish() emitter = nil collectgarbage("step", 64)  end   self.DieTime = CurTime() + self.LifeTime end  function EFFECT:Think() end  function EFFECT:Render() end 