function GM:AddHonorableMention(pl, mentionid, ...)  if not (pEndBoard and pEndBoard:IsValid()) then  MakepEndBoard(ROUNDWINNER)  end   local mentiontab = self.HonorableMentions[mentionid]  if not mentiontab then return end   local pan = vgui.Create("DEndBoardPlayerPanel", pEndBoard.List)  pan:SetPlayer(pl, mentiontab.Color, string.format(mentiontab.String, mentiontab.Callback(pl, ...)), nil, mentiontab.Name)  pEndBoard.List:AddItem(pan) end  function GM:AddPersonalStat(personal_stat_id, value)  if not (pEndBoard and pEndBoard:IsValid()) then  MakepEndBoard(ROUNDWINNER)  end   local personalstattab = self.PersonalStats[personal_stat_id]  if not personalstattab then return end   local pan = vgui.Create("DEndBoardPersonalStatPanel", pEndBoard.PersonalList)  pan:SetPlayer(personalstattab.Color, value, nil, personalstattab.Name)  pEndBoard.PersonalList:AddItem(pan) end  function MakepEndBoard(winner)  if pEndBoard and pEndBoard:IsValid() then  pEndBoard:SetVisible(true)          return  end   local localwin = winner == TEAM_HUMAN and MySelf:IsValid() and MySelf:Team() == winner   local screenscale = BetterScreenScale()  local wid, hei = math.min(ScrW(), 650) * screenscale, math.min(ScrH(), 800) * screenscale   local frame = vgui.Create("DFrame")  frame:SetWide(wid)     frame:SetTall(hei)  frame:SetKeyboardInputEnabled(false)  frame:SetDeleteOnClose(false)  frame:SetCursor("pointer")  frame:SetTitle(" ")  pEndBoard = frame      local topspace = vgui.Create("DPanel", frame)     topspace:SetTall(128 * screenscale)  topspace:AlignTop(30 * screenscale)     topspace:AlignLeft(8)  topspace:SetWide(wid - 16)     topspace.Paint = function() end   local y = 0   local heading  if localwin then  surface.PlaySound("beams/beamstart5.wav")  heading = EasyLabel(topspace, "You have won!", "ZSHUDFontBig", COLOR_CYAN)  else  surface.PlaySound("ambient/levels/citadel/strange_talk"..math.random(3, 11)..".wav")  heading = EasyLabel(topspace, "You have lost.", "ZSHUDFontBig", COLOR_RED)  end  heading:SetPos(wid * 0.5 - heading:GetWide() * 0.5, y)  y = y + heading:GetTall() + 8   local subheading  if localwin then  subheading = EasyLabel(topspace, "The humans have survived for now.", "ZSHUDFontSmaller", COLOR_WHITE)  else  subheading = EasyLabel(topspace, "The undead army grows stronger.", "ZSHUDFontSmaller", COLOR_LIMEGREEN)  end  subheading:SetPos(wid * 0.5 - subheading:GetWide() * 0.5, y)  y = y + subheading:GetTall() + 2      local propertysheet = vgui.Create("DPropertySheet", frame)  propertysheet:SetSize(wid, hei - 160)  propertysheet:MoveBelow(topspace, 4)  propertysheet:SetPadding(1)  frame.Property = propertysheet      local honor_pane = vgui.Create("DPanel")     honor_pane.Paint = function() end      propertysheet:AddSheet("Honorable Mentions", honor_pane)   local svpan = EasyLabel(honor_pane, "Honorable Mentions", "ZSHUDFontSmall", COLOR_WHITE)  svpan:SetPos(wid * 0.5 - svpan:GetWide() * 0.5, 8 * screenscale)   local list = vgui.Create("DPanelList", honor_pane)  list:SetSize(wid - 16, propertysheet:GetTall() - 72 * screenscale)  list:SetPos(6, 48 * screenscale)  list:SetPadding(8)  list:SetSpacing(4)  list:EnableVerticalScrollbar()      local personal_stats = vgui.Create("DPanel")     personal_stats.Paint = function() end      propertysheet:AddSheet("Personal Stats", personal_stats)      local personal_head = EasyLabel(personal_stats, "Personal Statistics", "ZSHUDFontSmall", COLOR_WHITE)  personal_head:SetPos(wid * 0.5 - personal_head:GetWide() * 0.5, 8 * screenscale)   local pe_list = vgui.Create("DPanelList", personal_stats)  pe_list:SetSize(wid - 16, propertysheet:GetTall() - 72 * screenscale)  pe_list:SetPos(6, 48 * screenscale)  pe_list:SetPadding(8)  pe_list:SetSpacing(4)  pe_list:EnableVerticalScrollbar()   frame.List = list  frame.PersonalList = pe_list  frame:Center()   frame:MakePopup()   return frame end  local PANEL = {} function PANEL:OnMousePressed(mc)  if mc == MOUSE_LEFT then  local pl = self:GetPlayer()  if pl:IsValid() then  gamemode.Call("ClickedEndBoardPlayerButton", pl, self)  end  end end  function PANEL:Init()  local screenscale = math.max(1, BetterScreenScale())  self:SetSize(200 * screenscale, 38 * screenscale) end  function PANEL:GetPlayer()  return self.m_Player or NULL end  function PANEL:SetPlayer(pl, col, misc, misccol, overridename)  if self.m_pAvatar then  self.m_pAvatar:Remove()  self.m_pAvatar = nil  end  if self.m_pName then  self.m_pName:Remove()  self.m_pName = nil  end  if self.m_pMisc then  self.m_pMisc:Remove()  self.m_pMisc = nil  end   if pl:IsValidPlayer() then  local name = overridename or pl:Name()   local avatar = vgui.Create("AvatarImage", self)  avatar:SetPos(2, 2)  avatar:SetSize(32, 32)  avatar:SetPlayer(pl)  avatar:SetTooltip("Click here to view their Steam Community profile.")  self.m_pAvatar = avatar   local namelab = EasyLabel(self, name, "ZSHUDFontTiny", col)  namelab:SetPos(40, GAMEMODE:TypewriterFont() and 4 or -2)  self.m_pName = namelab   if misc then  local misclab = EasyLabel(self, misc, nil, misccol)  misclab:SetPos(58, self:GetTall() - 1 - misclab:GetTall())  end  end end vgui.Register("DEndBoardPlayerPanel", PANEL, "DPanel")  PANEL = {}  function PANEL:Init()  local screenscale = math.max(1, BetterScreenScale())  self:SetSize(200 * screenscale, 24 * screenscale) end  function PANEL:GetPlayer()  return self.m_Player or NULL end  function PANEL:SetPlayer(col, value, valuecol, overridename)  if self.m_pName then  self.m_pName:Remove()  self.m_pName = nil  end  if self.m_pMisc then  self.m_pMisc:Remove()  self.m_pMisc = nil  end      local screenscale = math.max(1, BetterScreenScale())     local y = (GAMEMODE:TypewriterFont() and 4 or -2) + 4      local namelab = EasyLabel(self, overridename, "ZSHUDFontTiny", col)     namelab:SetPos(8, y)     self.m_pName = namelab      if value then         local misclab = EasyLabel(self, value, "ZSHUDFontTiny", valuecol)         misclab:SetPos(350 * screenscale, y)     end end vgui.Register("DEndBoardPersonalStatPanel", PANEL, "DPanel") 