CLASS.Base = "zombie_torso"  CLASS.Name = "Gunk Zombie Torso" CLASS.TranslationName = "class_gunk_zombie_torso" CLASS.Description = "description_gunk_zombie_torso" CLASS.Help = "controls_gunk_zombie_torso"  CLASS.SWEP = "weapon_zs_gunkzombie_torso" CLASS.Speed = 120  local math_random = math.random local string_format = string.format  function CLASS:PlayPainSound(pl)  pl:EmitSound(string_format("npc/zombie_poison/pz_idle%d.wav", math_random(2, 3)), 72, 120)  pl.NextPainSound = CurTime() + 0.5   return true end  function CLASS:Move(pl, move)  local wep = pl:GetActiveWeapon()  if not wep.GetGunking then return end   if CurTime() < wep:GetGunking() + 2 then  move:SetMaxSpeed(160)  move:SetMaxClientSpeed(160)  end end  function CLASS:PlayDeathSound(pl)  pl:EmitSound("npc/ichthyosaur/water_growl5.wav", 72, 70)  return true end  local function CreateGunk(pl, damage, damagepos, damagedir)  damage = math.min(damage, 100)   pl:EmitSound("physics/flesh/flesh_squishy_impact_hard"..math.random(4)..".wav", 74, 125 - damage * 0.50)   if SERVER then  damagepos = pl:LocalToWorld(damagepos)   for i=1, math.max(1, math.floor(damage / 15)) do  local ent = ents.Create("projectile_gunk")  if ent:IsValid() then  local heading = (damagedir + VectorRand() * 0.3):GetNormalized()  ent:SetPos(damagepos + heading)  ent:SetOwner(pl)  ent:Spawn()   local phys = ent:GetPhysicsObject()  if phys:IsValid() then  phys:Wake()  phys:SetVelocityInstantaneous(math.min(300, 50 + damage ^ math.Rand(1.15, 1.25)) * heading)  end  end  end  end end  function CLASS:ProcessDamage(pl, dmginfo)  local attacker, damage = dmginfo:GetAttacker(), math.min(dmginfo:GetDamage(), pl:Health())  if attacker ~= pl and damage >= 5 and CurTime() >= (pl.m_NextPukeEmit or 0) then  pl.m_NextPukeEmit = CurTime() + 0.3   local pos = pl:WorldToLocal(dmginfo:GetDamagePosition())  local norm = dmginfo:GetDamageForce():GetNormalized() * -1  timer.Simple(0, function()  if pl:IsValid() then  CreateGunk(pl, damage, pos, norm)  end  end)  end end