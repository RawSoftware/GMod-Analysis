CLASS.Base = "boss_red_marrow"  CLASS.Name = "Cold Marrow" CLASS.TranslationName = "class_cold_marrow" CLASS.Description = "description_cold_marrow" CLASS.Help = "controls_cold_marrow"  CLASS.Demiboss = true CLASS.Boss = false  CLASS.KnockbackScale = 0.5  CLASS.FearPerInstance = 1  CLASS.Health = 800 CLASS.Points = CLASS.Health/GM.HumanoidZombiePointRatio  CLASS.Model = Model("models/player/skeleton.mdl")  CLASS.VoicePitch = 0.65  CLASS.SWEP = "weapon_zs_coldmarrow" CLASS.Cat = ZCLASSCAT_DESTRUC  CLASS.Speed = 165  CLASS.ResistFrost = true  local math_ceil = math.ceil local math_Clamp = math.Clamp  function CLASS:ProcessDamage(pl, dmginfo)  local attacker = dmginfo:GetAttacker()  local dmg = dmginfo:GetDamage()  local hp = pl:Health()   if pl:GetStatus("redmarrow") and attacker:IsPlayer() and attacker:Team() == TEAM_HUMAN then  dmginfo:SetDamage(0)  dmginfo:ScaleDamage(0)  dmg = 0  end   local numthreshold = math_Clamp(math_ceil(hp / 400), 1, 2)  local dmgthreshold = math_Clamp(numthreshold * 400 - 400, 1, 400)   local newhp = hp - dmg  local nulldmg = dmgthreshold - newhp   if newhp <= dmgthreshold and pl["bloodth"..numthreshold] then  pl["bloodth"..numthreshold] = false  dmginfo:SetDamage(dmg - nulldmg)   local status = pl:GiveStatus("redmarrow", 3)  status:SetDTBool(0, true)   local effectdata = EffectData()  effectdata:SetOrigin(pl:WorldSpaceCenter())  util.Effect("explosion_cold", effectdata)   for _, ent in pairs(util.BlastAlloc(pl:GetActiveWeapon() or NULL, pl, pl:GetPos(), 100)) do  if ent:IsValidLivingPlayer() and gamemode.Call("PlayerShouldTakeDamage", ent, pl) and ent ~= pl then  ent:GiveStatus("debuff_frost", 5, pl)  ent:AddLegDamage(12)  ent:AddArmDamage(12)  end  end  end end 